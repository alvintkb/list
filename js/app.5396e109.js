(function(){"use strict";var e={3243:function(e,t,a){var n=a(3751),o=a(641);const l=e=>((0,o.Qi)("data-v-6b2934c1"),e=e(),(0,o.jt)(),e),r=l((()=>(0,o.Lk)("img",{id:"scroll-to-section",class:"svg-icon",src:"img/Unifi-logo.svg",alt:"Unifi Home"},null,-1))),i=l((()=>(0,o.Lk)("span",null,"Home",-1))),s=l((()=>(0,o.Lk)("span",null,"About",-1)));function c(e,t,a,n,l,c){const u=(0,o.g2)("v-icon"),d=(0,o.g2)("v-btn"),m=(0,o.g2)("v-app-bar-nav-icon"),p=(0,o.g2)("v-toolbar-title"),h=(0,o.g2)("v-spacer"),g=(0,o.g2)("v-app-bar"),f=(0,o.g2)("v-list-item-icon"),v=(0,o.g2)("v-list-item-title"),b=(0,o.g2)("v-list-item"),k=(0,o.g2)("v-list-item-group"),y=(0,o.g2)("v-list"),C=(0,o.g2)("v-navigation-drawer"),w=(0,o.g2)("router-view"),F=(0,o.g2)("v-main"),I=(0,o.g2)("v-bottom-navigation"),x=(0,o.g2)("v-app");return(0,o.uX)(),(0,o.Wv)(x,null,{default:(0,o.k6)((()=>[(0,o.bF)(g,{app:"",color:"primary",dark:""},{default:(0,o.k6)((()=>[c.isSubPage?((0,o.uX)(),(0,o.Wv)(d,{key:0,onClick:c.goBack,icon:""},{default:(0,o.k6)((()=>[(0,o.bF)(u,null,{default:(0,o.k6)((()=>[(0,o.eW)("mdi-arrow-left")])),_:1})])),_:1},8,["onClick"])):((0,o.uX)(),(0,o.Wv)(m,{key:1,onClick:t[0]||(t[0]=e=>l.drawer=!l.drawer)})),(0,o.bF)(p,null,{default:(0,o.k6)((()=>[r])),_:1}),(0,o.bF)(h),n.authStore.isAuthenticated?((0,o.uX)(),(0,o.Wv)(d,{key:2,onClick:c.logout,icon:""},{default:(0,o.k6)((()=>[(0,o.bF)(u,null,{default:(0,o.k6)((()=>[(0,o.eW)("mdi-logout")])),_:1})])),_:1},8,["onClick"])):(0,o.Q3)("",!0)])),_:1}),(0,o.bF)(C,{modelValue:l.drawer,"onUpdate:modelValue":t[1]||(t[1]=e=>l.drawer=e),app:"",temporary:""},{default:(0,o.k6)((()=>[(0,o.bF)(y,{nav:""},{default:(0,o.k6)((()=>[n.authStore.isAuthenticated?((0,o.uX)(),(0,o.Wv)(k,{key:0},{default:(0,o.k6)((()=>[(0,o.bF)(b,{to:"/home",exact:""},{default:(0,o.k6)((()=>[(0,o.bF)(f,null,{default:(0,o.k6)((()=>[(0,o.bF)(u,null,{default:(0,o.k6)((()=>[(0,o.eW)("mdi-home")])),_:1})])),_:1}),(0,o.bF)(v,null,{default:(0,o.k6)((()=>[(0,o.eW)("Home")])),_:1})])),_:1}),(0,o.bF)(b,{to:"/about",exact:""},{default:(0,o.k6)((()=>[(0,o.bF)(f,null,{default:(0,o.k6)((()=>[(0,o.bF)(u,null,{default:(0,o.k6)((()=>[(0,o.eW)("mdi-information")])),_:1})])),_:1}),(0,o.bF)(v,null,{default:(0,o.k6)((()=>[(0,o.eW)("About")])),_:1})])),_:1})])),_:1})):(0,o.Q3)("",!0),(0,o.bF)(b,{to:"/",exact:""},{default:(0,o.k6)((()=>[(0,o.bF)(f,null,{default:(0,o.k6)((()=>[(0,o.bF)(u,null,{default:(0,o.k6)((()=>[(0,o.eW)("mdi-login")])),_:1})])),_:1}),(0,o.bF)(v,null,{default:(0,o.k6)((()=>[(0,o.eW)("Login")])),_:1})])),_:1}),(0,o.bF)(b,{to:"/soc",exact:""},{default:(0,o.k6)((()=>[(0,o.bF)(f,null,{default:(0,o.k6)((()=>[(0,o.bF)(u,null,{default:(0,o.k6)((()=>[(0,o.eW)("mdi-phone")])),_:1})])),_:1}),(0,o.bF)(v,null,{default:(0,o.k6)((()=>[(0,o.eW)("Auto Show")])),_:1})])),_:1}),(0,o.bF)(b,{to:"/snr",exact:""},{default:(0,o.k6)((()=>[(0,o.bF)(f,null,{default:(0,o.k6)((()=>[(0,o.bF)(u,null,{default:(0,o.k6)((()=>[(0,o.eW)("mdi-search")])),_:1})])),_:1}),(0,o.bF)(v,null,{default:(0,o.k6)((()=>[(0,o.eW)("Search & Replace")])),_:1})])),_:1}),(0,o.bF)(b,{to:"/listProject",exact:""},{default:(0,o.k6)((()=>[(0,o.bF)(f,null,{default:(0,o.k6)((()=>[(0,o.bF)(u,null,{default:(0,o.k6)((()=>[(0,o.eW)("mdi-search")])),_:1})])),_:1}),(0,o.bF)(v,null,{default:(0,o.k6)((()=>[(0,o.eW)("List Project")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.bF)(F,null,{default:(0,o.k6)((()=>[(0,o.bF)(w)])),_:1}),n.authStore.isAuthenticated?((0,o.uX)(),(0,o.Wv)(I,{key:0,app:""},{default:(0,o.k6)((()=>[(0,o.bF)(d,{to:"/home",exact:""},{default:(0,o.k6)((()=>[i,(0,o.bF)(u,null,{default:(0,o.k6)((()=>[(0,o.eW)("mdi-home")])),_:1})])),_:1}),(0,o.bF)(d,{to:"/about",exact:""},{default:(0,o.k6)((()=>[s,(0,o.bF)(u,null,{default:(0,o.k6)((()=>[(0,o.eW)("mdi-information")])),_:1})])),_:1})])),_:1})):(0,o.Q3)("",!0)])),_:1})}a(4114);var u=a(953);const d=(0,u.Kh)({isAuthenticated:"true"===localStorage.getItem("authenticated"),login(){this.isAuthenticated=!0,localStorage.setItem("authenticated","true")},logout(){this.isAuthenticated=!1,localStorage.removeItem("authenticated")}});var m={name:"App",setup(){return{authStore:d}},components:{},data(){return{drawer:!1,pageTitle:"My Image Slider",imagesArray:[{src:"img/UniVerse.jpg",category:"HOME",route:"/home"},{src:"img/3.png",category:"WINBACK",route:"/winback"},{src:"img/2.png",category:"BUSINESS",route:"/business"}]}},computed:{filteredImages(){return this.imagesArray},isSubPage(){const e=["/"];return!e.includes(this.$route.path)}},methods:{goBack(){this.$router.go(-1)},logout(){this.authStore.logout(),this.$router.push({name:"Login"})}},watch:{$route(e,t){console.log("Route changed from",t.path,"to",e.path)}}},p=a(6262);const h=(0,p.A)(m,[["render",c],["__scopeId","data-v-6b2934c1"]]);var g=h,f=a(6166),v=a(33);const b={class:"header"},k={class:"page-title"};function y(e,t,a,n,l,r){const i=(0,o.g2)("MySelector"),s=(0,o.g2)("MyPackage"),c=(0,o.g2)("MyReg"),u=(0,o.g2)("LaunchButton"),d=(0,o.g2)("tmReg"),m=(0,o.g2)("ImageUpLoader"),p=(0,o.g2)("CameraCapture");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",b,[(0,o.Lk)("h1",k,(0,v.v_)(l.pageTitle),1)]),(0,o.bF)(i,{plans:l.filteredPlans},null,8,["plans"]),(0,o.bF)(s,{pageTitle:l.pageTitle,plans:l.filteredPlans},null,8,["pageTitle","plans"]),(0,o.bF)(c),l.showLaunchButton?((0,o.uX)(),(0,o.Wv)(u,{key:0})):(0,o.Q3)("",!0),(0,o.bF)(d,{project:l.paramValue,onClose:t[0]||(t[0]=t=>e.showRegistration=!1)},null,8,["project"]),(0,o.bF)(m),(0,o.bF)(p)])}const C={key:0},w={key:1},F=["href"],I={key:2};function x(e,t,a,n,l,r){return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("input",{type:"file",onChange:t[0]||(t[0]=(...e)=>r.onFileChange&&r.onFileChange(...e))},null,32),(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>r.uploadImage&&r.uploadImage(...e))},"Upload"),l.uploading?((0,o.uX)(),(0,o.CE)("p",C,"Uploading...")):(0,o.Q3)("",!0),l.imageUrl?((0,o.uX)(),(0,o.CE)("p",w,[(0,o.eW)("Image URL: "),(0,o.Lk)("a",{href:l.imageUrl,target:"_blank"},(0,v.v_)(l.imageUrl),9,F)])):(0,o.Q3)("",!0),l.error?((0,o.uX)(),(0,o.CE)("p",I,(0,v.v_)(l.error),1)):(0,o.Q3)("",!0)])}var L=a(4335),S={name:"ImageUploader",data(){return{file:null,imageUrl:"",uploading:!1,error:""}},methods:{onFileChange(e){this.file=e.target.files[0]},async uploadImage(){if(!this.file)return void(this.error="Please select an image file first.");this.uploading=!0,this.error="";const e=new FormData;e.append("file",this.file),e.append("upload_preset","telco_unifi");try{const t=await L.A.post("https://api.cloudinary.com/v1_1/alvin-tan/image/upload",e,{headers:{"X-Requested-With":"XMLHttpRequest"}});this.imageUrl=t.data.secure_url}catch(t){t.response&&400===t.response.status?this.error="Bad Request: "+(t.response.data.error.message||"Invalid request parameters"):this.error="Error uploading image: "+t.message,console.error("Error uploading image:",t.response?t.response.data:t.message)}finally{this.uploading=!1}}}};const _=(0,p.A)(S,[["render",x],["__scopeId","data-v-4280697f"]]);var R=_;function $(e,t,a,n,l,r){return(0,o.uX)(),(0,o.CE)("button",{onClick:t[0]||(t[0]=(...e)=>n.goToAdContacts&&n.goToAdContacts(...e))},"View Ad Contacts")}var N={name:"LaunchButton",setup(){const e=(0,f.rd)(),t=()=>{e.push("/ad-contacts")};return{goToAdContacts:t}}};const E=(0,p.A)(N,[["render",$],["__scopeId","data-v-3c496bee"]]);var D=E;const U={class:"pricing-container"},M=["id"],P={class:"pricing-table"},T={class:"pricing-card"},W={class:"pricing-details"},A={key:0},j={class:"image-and-text"},O=["src","alt"],V={key:1},B={class:"svg-and-text"},X=["innerHTML"],q={key:2},H={key:3},J={class:"pricing-info"},K={class:"pricing-content"},Y={class:"pricing-action"},Q=["onClick"];function z(e,t,a,n,l,r){return(0,o.uX)(),(0,o.CE)("div",U,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.plans,((e,t)=>((0,o.uX)(),(0,o.CE)("section",{key:t,id:"pricing-section-"+(t+1),class:"pricing-section"},[(0,o.Lk)("div",P,[(0,o.Lk)("div",T,[(0,o.Lk)("div",W,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.features,((t,a)=>((0,o.uX)(),(0,o.CE)("div",{key:a},[r.isImage(t)?((0,o.uX)(),(0,o.CE)("div",A,[(0,o.Lk)("div",j,[(0,o.Lk)("img",{src:r.getImagePath(t).src,alt:e.title+" feature image",style:(0,v.Tr)(r.getImageStyle(t)),class:"feature-image"},null,12,O),(0,o.Lk)("h2",null,(0,v.v_)(r.getImagePath(t).text),1)])])):r.isSvg(t)?((0,o.uX)(),(0,o.CE)("div",V,[(0,o.Lk)("div",B,[(0,o.Lk)("div",{innerHTML:r.getSvgContent(t).svg},null,8,X),(0,o.Lk)("span",null,(0,v.v_)(r.getSvgContent(t).text),1)])])):r.isHtmlTag(t)?((0,o.uX)(),(0,o.CE)("div",q,[((0,o.uX)(),(0,o.Wv)((0,o.$y)(r.getHtmlTagName(t)),null,{default:(0,o.k6)((()=>[(0,o.eW)((0,v.v_)(r.getHtmlTagContent(t)),1)])),_:2},1024))])):((0,o.uX)(),(0,o.CE)("div",H,(0,v.v_)(t),1))])))),128)),(0,o.Lk)("div",J,[(0,o.Lk)("p",null,(0,v.v_)(e.promo),1),(0,o.Lk)("p",null,(0,v.v_)(e.price),1)]),(0,o.Lk)("div",K,[(0,o.Lk)("p",null,(0,v.v_)(e.extra),1)]),(0,o.Lk)("div",Y,[(0,o.Lk)("button",{class:"apply-now-btn",onClick:t=>r.fillPackageName(e.title)},"Apply Now",8,Q)])])])])],8,M)))),128))])}var G={name:"MyPackage",props:{pageTitle:{type:String,default:""},plans:{type:Array,required:!0}},methods:{fillPackageName(e){console.log(e),this.packageName=e,document.getElementById("registration-form").scrollIntoView({behavior:"smooth"})},isImage(e){return e.startsWith("image:")},getImagePath(e){const t=e.split(","),a=t[0].split("image:")[1].trim(),n=t[3]?t[3].trim():"";return{src:a,text:n}},getImageStyle(e){const t=e.split(","),a=t[1]?t[1].split("=")[1].trim()+"px":"auto",n=t[2]?t[2].split("=")[1].trim()+"px":"auto";return{width:a,height:n}},isSvg(e){return e.startsWith("svg:")},getSvgContent(e){const[t,...a]=e.split("svg:")[1].split(","),n=t.trim(),o=a.shift().trim();return{svg:`<svg ${n}>${o}</svg>`,text:a.join(",").trim()}},isHtmlTag(e){return e.match(/^[a-zA-Z0-9]+:/)},getHtmlTagName(e){return e.split(":")[0]},getHtmlTagContent(e){return e.split(":")[1].trim()}}};const Z=(0,p.A)(G,[["render",z]]);var ee=Z;const te={class:"container"},ae={class:"selector-wrapper"},ne=["src","alt","onClick"],oe=["value"],le=(0,o.Lk)("span",{class:"sd-tick"},null,-1),re={class:"selector-title"},ie=(0,o.Lk)("div",{class:"device-pair txt-small d-none"}," Pair with your Unifi subscription ",-1);function se(e,t,a,l,r,i){return(0,o.uX)(),(0,o.CE)("div",te,[(0,o.Lk)("div",ae,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.plans,((a,l)=>((0,o.uX)(),(0,o.CE)("label",{key:l,class:"sd-label selector-label"},[(0,o.Lk)("img",{class:"svg-icon",src:a.image,alt:a.title,onClick:e=>i.scrollToSection("pricing-section-"+(l+1))},null,8,ne),(0,o.bo)((0,o.Lk)("input",{type:"radio",class:"sd-radio",name:"plan",value:a.value,"onUpdate:modelValue":t[0]||(t[0]=t=>e.selectedPlan=t)},null,8,oe),[[n.XL,e.selectedPlan]]),le,(0,o.Lk)("div",re,(0,v.v_)(a.price),1)])))),128)),ie])])}var ce={name:"MySelector",props:{pageTitle:{type:String,default:""},plans:{type:Array,required:!0}},methods:{scrollToSection(e){document.getElementById(e).scrollIntoView({behavior:"smooth"})}}};const ue=(0,p.A)(ce,[["render",se]]);var de=ue;const me=e=>((0,o.Qi)("data-v-202c1f5f"),e=e(),(0,o.jt)(),e),pe=me((()=>(0,o.Lk)("h1",{id:"registration-form"},"Registration Form",-1))),he={class:"form-container"},ge=me((()=>(0,o.Lk)("h3",null,"Fill up your details and we would be delighted to assist you",-1))),fe={class:"form-group"},ve={key:0,for:"project"},be={class:"form-group"},ke={key:0,for:"name"},ye={class:"form-group"},Ce={key:0,for:"phone"},we={class:"form-group"},Fe={key:0,for:"email"},Ie={class:"form-group"},xe={key:0,for:"address"},Le={class:"form-group"},Se={key:0,for:"message"},_e=me((()=>(0,o.Lk)("label",{for:"appointmentDate"},"Installation Schedule:",-1))),Re={class:"form-group"},$e={class:"form-row"},Ne={class:"form-group"},Ee=me((()=>(0,o.Lk)("label",{for:"preferredInstallationDate"},"Preferred Installation Date (dd/mm/yyyy):",-1))),De={class:"form-group"},Ue=me((()=>(0,o.Lk)("label",{for:"nationality"},"Nationality:",-1))),Me={class:"form-group"},Pe=me((()=>(0,o.Lk)("label",{for:"icFront"},"IC Front:",-1))),Te={class:"form-group"},We=me((()=>(0,o.Lk)("label",{for:"icBack"},"IC Back:",-1))),Ae={class:"form-group"},je=me((()=>(0,o.Lk)("label",{for:"utilityBills"},"Utility Bills (Electric or Water):",-1))),Oe=["disabled"],Ve=me((()=>(0,o.Lk)("br",null,null,-1)));function Be(e,t,a,l,r,i){const s=(0,o.g2)("popUp2"),c=(0,o.g2)("TermsConditions");return(0,o.uX)(),(0,o.CE)(o.FK,null,[pe,(0,o.Lk)("div",he,[ge,(0,o.Lk)("form",{onSubmit:t[15]||(t[15]=(0,n.D$)(((...e)=>l.submitForm&&l.submitForm(...e)),["prevent"]))},[(0,o.Lk)("div",fe,[l.localPackage?((0,o.uX)(),(0,o.CE)("label",ve,"Package Name:")):(0,o.Q3)("",!0),(0,o.bo)((0,o.Lk)("input",{class:"white-text",type:"text",id:"package","onUpdate:modelValue":t[0]||(t[0]=e=>l.localPackage=e),name:"package-name",placeholder:"Package*",required:""},null,512),[[n.Jo,l.localPackage]])]),(0,o.Lk)("div",be,[l.name?((0,o.uX)(),(0,o.CE)("label",ke,"Name:")):(0,o.Q3)("",!0),(0,o.bo)((0,o.Lk)("input",{class:"white-text",type:"text",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>l.name=e),placeholder:"Name*",required:""},null,512),[[n.Jo,l.name]])]),(0,o.Lk)("div",ye,[l.phone?((0,o.uX)(),(0,o.CE)("label",Ce,"Phone:")):(0,o.Q3)("",!0),(0,o.bo)((0,o.Lk)("input",{class:"white-text",type:"tel",id:"phone","onUpdate:modelValue":t[2]||(t[2]=t=>e.formattedPhone=t),onInput:t[3]||(t[3]=(...e)=>l.formatPhone&&l.formatPhone(...e)),placeholder:"Phone*",required:""},null,544),[[n.Jo,e.formattedPhone]])]),(0,o.Lk)("div",we,[l.email?((0,o.uX)(),(0,o.CE)("label",Fe,"Email:")):(0,o.Q3)("",!0),(0,o.bo)((0,o.Lk)("input",{class:"white-text",type:"email",id:"email","onUpdate:modelValue":t[4]||(t[4]=e=>l.email=e),placeholder:"Email*",required:""},null,512),[[n.Jo,l.email]])]),(0,o.Lk)("div",Ie,[l.address?((0,o.uX)(),(0,o.CE)("label",xe,"Installation Address:")):(0,o.Q3)("",!0),(0,o.bo)((0,o.Lk)("input",{class:"white-text",type:"text",id:"address","onUpdate:modelValue":t[5]||(t[5]=e=>l.address=e),placeholder:"Installation Address*",required:""},null,512),[[n.Jo,l.address]])]),(0,o.Lk)("div",Le,[l.message?((0,o.uX)(),(0,o.CE)("label",Se,"Additional Info:")):(0,o.Q3)("",!0),(0,o.bo)((0,o.Lk)("textarea",{class:"white-text",id:"message","onUpdate:modelValue":t[6]||(t[6]=e=>l.message=e),placeholder:"Additional Info*",required:""},null,512),[[n.Jo,l.message]])]),_e,(0,o.Lk)("div",Re,[(0,o.Lk)("div",$e,[(0,o.bo)((0,o.Lk)("input",{class:"white-text",type:"date",id:"appointmentDate","onUpdate:modelValue":t[7]||(t[7]=e=>l.appointmentDate=e),placeholder:"Appointment Date*",required:""},null,512),[[n.Jo,l.appointmentDate]]),(0,o.bo)((0,o.Lk)("input",{class:"white-text",type:"time",id:"appointmentTime","onUpdate:modelValue":t[8]||(t[8]=e=>l.appointmentTime=e),placeholder:"Appointment Time*",required:""},null,512),[[n.Jo,l.appointmentTime]])])]),(0,o.Lk)("div",Ne,[Ee,(0,o.bo)((0,o.Lk)("input",{class:"white-text",type:"text",id:"preferredInstallationDate","onUpdate:modelValue":t[9]||(t[9]=e=>l.preferredInstallationDate=e),placeholder:"Preferred Installation Date*",required:""},null,512),[[n.Jo,l.preferredInstallationDate]])]),(0,o.Lk)("div",De,[Ue,(0,o.bo)((0,o.Lk)("input",{class:"white-text",type:"text",id:"nationality","onUpdate:modelValue":t[10]||(t[10]=e=>l.nationality=e),placeholder:"Nationality*",required:""},null,512),[[n.Jo,l.nationality]])]),(0,o.Lk)("div",Me,[Pe,(0,o.Lk)("input",{type:"file",id:"icFront",onChange:t[11]||(t[11]=e=>l.handleFileUpload(e,"icFront")),required:""},null,32),(0,o.Lk)("p",null,(0,v.v_)(l.icFrontName||"No file chosen"),1)]),(0,o.Lk)("div",Te,[We,(0,o.Lk)("input",{type:"file",id:"icBack",onChange:t[12]||(t[12]=e=>l.handleFileUpload(e,"icBack")),required:""},null,32),(0,o.Lk)("p",null,(0,v.v_)(l.icBackName||"No file chosen"),1)]),(0,o.Lk)("div",Ae,[je,(0,o.Lk)("input",{type:"file",id:"utilityBills",onChange:t[13]||(t[13]=e=>l.handleFileUpload(e,"utilityBills")),required:""},null,32),(0,o.Lk)("p",null,(0,v.v_)(l.utilityBillsName||"No file chosen"),1)]),(0,o.bF)(s,{"is-visible":l.showModal,"modal-message":l.modalMessage,onClose:t[14]||(t[14]=e=>l.showModal=!1)},null,8,["is-visible","modal-message"]),(0,o.Lk)("button",{type:"submit",class:"submit-button white-text",disabled:l.formSubmitted},(0,v.v_)(l.formSubmitted?"Submitting...":"Yes! Contact Me Now"),9,Oe)],32),Ve,(0,o.bF)(c)]),(0,o.bF)(s,{"is-visible":l.showModal,"modal-message":l.modalMessage,onClose:t[16]||(t[16]=e=>l.showModal=!1)},null,8,["is-visible","modal-message"])],64)}var Xe=a(1186),qe=a(6679);const He={key:0,class:"modal"},Je={class:"modal-content"};function Ke(e,t,a,n,l,r){return a.isVisible?((0,o.uX)(),(0,o.CE)("div",He,[(0,o.Lk)("div",Je,[(0,o.Lk)("span",{class:"close",onClick:t[0]||(t[0]=t=>e.$emit("close"))},"×"),(0,o.Lk)("p",null,(0,v.v_)(a.modalMessage),1)])])):(0,o.Q3)("",!0)}var Ye={name:"popUp2",props:{isVisible:{type:Boolean,required:!0},modalMessage:{type:String,required:!0}},emits:["close"]};const Qe=(0,p.A)(Ye,[["render",Ke],["__scopeId","data-v-4f7ce36e"]]);var ze=Qe,Ge={name:"tmReg",components:{popUp2:ze},props:{project:{type:String,required:!0}},emits:["close"],setup(e,{emit:t}){const a=(0,u.KR)(e.project),n=(0,u.KR)(""),l=(0,u.KR)(!1),r=(0,u.KR)(!1),i=(0,u.KR)(""),s=(0,u.KR)(""),c=(0,u.KR)(""),d=(0,u.KR)(""),m=(0,u.KR)(""),p=(0,u.KR)(""),h=(0,u.KR)(""),g=(0,u.KR)(""),f=(0,u.KR)(""),v=(0,u.KR)(""),b=(0,u.KR)(null),k=(0,u.KR)(null),y=(0,u.KR)(null),C=(0,u.KR)(""),w=(0,u.KR)(""),F=(0,u.KR)(""),I=(0,u.KR)(""),x=e=>{const t=e.target,a=t.value.replace(/\D/g,"").substring(0,10),n=a.replace(/(\d{3})(\d{3})(\d{4})/,"($1) $2-$3");t.value=n,c.value=a};(0,o.wB)((()=>e.project),(e=>{a.value=e}));const L=(e,t)=>{const a=e.target.files[0];"icFront"===t?(b.value=a,C.value=a.name):"icBack"===t?(k.value=a,w.value=a.name):"utilityBills"===t&&(y.value=a,F.value=a.name)},S=()=>{t("close")},_=qe.J1`
      query ($phone: String) {
        contacts(filters: { phone: { eq: $phone } }) {
          data {
            id
            attributes {
              name
              phone
            }
          }
        }
      }
    `,R=qe.J1`
  mutation AddContact($name: String!, $project: String!, $email: String!,$package:String!,
  $phone: String!, $address: String!, $message: String!, $PreferredInstallationDate: String!, 
  $Nationality: String!, $ICFrontURL: String!, $ICBackURL: String!, $UtilityBillURL: String!) {
  createContact(data: { 
    project: $project, 
    package: $package,
    name: $name, 
    email: $email, 
    phone: $phone, 
    installationAddress: $address, 
    message: $message, 
    PreferredInstallationDate: $PreferredInstallationDate, 
    Nationality: $Nationality, 
    ICFrontURL: $ICFrontURL, 
    ICBackURL: $ICBackURL, 
    UtilityBillURL: $UtilityBillURL 
  }) {
    data {
      id
      attributes {
        project
        package
        name
        phone
        IC
        email
        installationAddress
        billingAddress
        message
        PreferredInstallationDate
        Nationality
        ICFrontURL
        ICBackURL
        UtilityBillURL 
      }
    }
  }
}
 `,$=qe.J1`
     mutation UpdateContact($id: ID!, $name: String!, $project: String!, $email: String!, $package: String!, 
  $phone: String!, $address: String!, $message: String!, $PreferredInstallationDate: String!, 
  $Nationality: String!, $ICFrontURL: String!, $ICBackURL: String!, $UtilityBillURL: String!) {
  updateContact(id: $id, data: { 
    project: $project, 
    package: $package,
    name: $name, 
    email: $email, 
    phone: $phone, 
    installationAddress: $address, 
    message: $message, 
    PreferredInstallationDate: $PreferredInstallationDate, 
    Nationality: $Nationality, 
    ICFrontURL: $ICFrontURL, 
    ICBackURL: $ICBackURL, 
    UtilityBillURL: $UtilityBillURL 
  }) {
    data {
      id
      attributes {
        project
        package
        name
        phone
        IC
        email
        installationAddress
        billingAddress
        message
        PreferredInstallationDate
        Nationality
        ICFrontURL
        ICBackURL
        UtilityBillURL 
      }
    }
  }
}

    `,{mutate:N}=(0,Xe.n_)(R),{mutate:E}=(0,Xe.n_)($),{refetch:D,loading:U,error:M}=(0,Xe.IT)(_,{variables:{phone:c.value},skip:!0}),P=async()=>{l.value=!0;try{const{data:e}=await D({phone:c.value});if(M.value)return void console.error("Error fetching contact:",M.value);if(U.value)return void console.log("Waiting for contact check...");if(!e.contacts.data||0===e.contacts.data.length){console.log("Contact does not exist. Creating new contact.");const e=await N({package:n.value,project:a.value,name:s.value,phone:c.value,email:d.value,address:m.value,message:p.value,PreferredInstallationDate:f.value,Nationality:v.value,ICFrontURL:"icFront.value",ICBackURL:"icBack.value",UtilityBillURL:"utilityBillURL.value"});return console.log("Create Success:",e),l.value=!1,r.value=!0,void(i.value="Record created.")}const t=e.contacts.data[0];console.log("Contact exists. Updating contact with ID:",t.id);const o=await E({id:t.id,project:a.value,package:n.value,name:s.value,phone:c.value,email:d.value,address:m.value,message:p.value,PreferredInstallationDate:f.value,Nationality:v.value,ICFrontURL:"icFront.value",ICBackURL:"icBack.value",UtilityBillURL:"utilityBillURL.value"});console.log("Update Success:",o),l.value=!1,r.value=!0,i.value="Record updated."}catch(e){l.value=!1,console.error("Error:",e)}};return{localPackage:n,localProject:a,name:s,phone:c,email:d,address:m,message:p,appointmentDate:h,appointmentTime:g,preferredInstallationDate:f,nationality:v,icFront:b,icBack:k,utilityBills:y,icFrontName:C,icBackName:w,utilityBillsName:I,formSubmitted:l,submitForm:P,formatPhone:x,showModal:r,modalMessage:i,close:S,handleFileUpload:L}}};const Ze=(0,p.A)(Ge,[["render",Be],["__scopeId","data-v-202c1f5f"]]);var et=Ze;const tt=e=>((0,o.Qi)("data-v-1355d3ea"),e=e(),(0,o.jt)(),e),at={class:"camera-capture"},nt={key:0},ot={ref:"video",autoplay:"",playsinline:""},lt={ref:"canvas",style:{display:"none"}},rt=["src"],it={key:1},st=tt((()=>(0,o.Lk)("p",null,"Your device does not support camera access.",-1))),ct=[st];function ut(e,t,a,n,l,r){return(0,o.uX)(),(0,o.CE)("div",at,[l.hasMediaDevices?((0,o.uX)(),(0,o.CE)("div",nt,[(0,o.Lk)("video",ot,null,512),(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>r.takePicture&&r.takePicture(...e))},"Take Picture"),(0,o.Lk)("canvas",lt,null,512),l.imageData?((0,o.uX)(),(0,o.CE)("img",{key:0,src:l.imageData,alt:"Captured Image"},null,8,rt)):(0,o.Q3)("",!0)])):((0,o.uX)(),(0,o.CE)("div",it,ct))])}var dt={name:"CameraCapture",data(){return{hasMediaDevices:!1,imageData:null}},mounted(){this.initializeCamera()},methods:{async initializeCamera(){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){this.hasMediaDevices=!0;try{const e=await navigator.mediaDevices.getUserMedia({video:!0});this.$refs.video.srcObject=e}catch(e){console.error("Error accessing camera:",e),this.hasMediaDevices=!1}}else this.hasMediaDevices=!1},takePicture(){const e=this.$refs.canvas,t=this.$refs.video;e.width=t.videoWidth,e.height=t.videoHeight;const a=e.getContext("2d");a.drawImage(t,0,0,e.width,e.height),this.imageData=e.toDataURL("image/png")}}};const mt=(0,p.A)(dt,[["render",ut],["__scopeId","data-v-1355d3ea"]]);var pt=mt,ht={components:{CameraCapture:pt,ImageUpLoader:R,tmReg:et,MyPackage:ee,MySelector:de,LaunchButton:D},created(){this.paramValue=this.$route.query.param||"HOME",this.pageTitle=this.paramValue,console.log("Received parameter:",this.paramValue),this.filterPlans(this.paramValue),this.filterImages(this.paramValue)},data(){return{showLaunchButton:!1,pageTitle:"",paramValue:"",imagesArray:[{src:"img/UniVerse.jpg",category:"HOME",route:"/home"},{src:"img/3.png",category:"HOME",route:"/winback"},{src:"img/2.png",category:"HOME",route:"/business"},{src:"img/4.png",category:"BUSINESS",route:"/business"},{src:"img/5.png",category:"BUSINESS",route:"/business"}],plansArray:[{category:"HOME",title:"Unifi Home 100Mbps",image:"img/unifihome1a.svg",price:"RM 89",features:["image: img/unifihome1a.svg, width=100, height=100, Unifi Home 100Mbps","Unlimited Data",'svg:width="20" height="20",<circle cx="10" cy="10" r="8" stroke="green" stroke-width="4" fill="yellow" />,Download speed: 100mbps',"Upload speed: 50mbps","Recommended for 2 - 3 users on up to 5 devices","Free Wi-Fi 5 router","Voice call flat rate 20 sen/min to all lines","24 months contract","Add On RM28/Month For Netflix","image: img/freeInternet.png","PROMO: 1 MONTH FREE",'svg:width="20" height="20",<circle cx="10" cy="10" r="8" stroke="green" stroke-width="4" fill="yellow" />,RM89/Month',"FREE Wi-Fi 5 CERTIFIED ROUTER"]},{category:"HOME",title:"Unifi Home 300Mbps",image:"img/unifihome1b.svg",price:"RM 129",features:["h2: Unifi Home 300Mbps","Unlimited Data","Download speed: 300mbps","Upload speed: 150mbps","Recommended for 5 - 8 users on up to 10 devices","Free Wi-Fi 6 router","Voice call flat rate 20 sen/min to all lines","24 months contract","Add On RM28/Month For Netflix","image: img/freeInternet.png, width=100, height=100, Free Internet!","PROMO: 1 MONTH FREE","RM129/Month","FREE Wi-Fi 6 CERTIFIED ROUTER"]},{category:"HOME",title:"Unifi Home 500Mbps",image:"img/unifihome1b.svg",price:"RM 149",features:["h2: Unifi Home 500Mbps","Unlimited Data","Download speed: 500mbps","Upload speed: 250mbps","Recommended for 8 - 10 users on up to 15 devices","Free Wi-Fi 6 router","Voice call flat rate 20 sen/min to all lines","24 months contract","Add On RM28/Month For Netflix","image: img/freeInternet.png, width=100, height=100, Free Internet!","PROMO: 1 MONTH FREE","RM189/Month","FREE Wi-Fi 6 CERTIFIED ROUTER"]},{category:"BUSINESS",title:"Unifi Home 100Mbps",image:"img/unifihome1a.svg",price:"RM 89",features:["image: img/unifihome1a.svg, width=100, height=100, Unifi BUSINESS 100Mbps","Unlimited Data",'svg:width="20" height="20",<circle cx="10" cy="10" r="8" stroke="green" stroke-width="4" fill="yellow" />,Download speed: 100mbps',"Upload speed: 50mbps","Recommended for 2 - 3 users on up to 5 devices","Free Wi-Fi 5 router","Voice call flat rate 20 sen/min to all lines","24 months contract","Add On RM28/Month For Netflix","image: img/freeInternet.png","PROMO: 1 MONTH FREE",'svg:width="20" height="20",<circle cx="10" cy="10" r="8" stroke="green" stroke-width="4" fill="yellow" />,RM89/Month',"FREE Wi-Fi 5 CERTIFIED ROUTER"]}],filteredPlans:[],filteredImages:[]}},methods:{goBack(){this.$router.go(-1)},filterPlans(e){this.filteredPlans=this.plansArray.filter((t=>t.category===e))},filterImages(e){this.filteredImages=this.imagesArray.filter((t=>t.category===e))}}};const gt=(0,p.A)(ht,[["render",y]]);var ft=gt;const vt=e=>((0,o.Qi)("data-v-d1f5a34e"),e=e(),(0,o.jt)(),e),bt=vt((()=>(0,o.Lk)("h1",{class:"title"},"About Page",-1))),kt=vt((()=>(0,o.Lk)("p",null,"This is the about page of the application.",-1)));function yt(e,t,a,n,l,r){const i=(0,o.g2)("v-col"),s=(0,o.g2)("v-row"),c=(0,o.g2)("v-container"),u=(0,o.g2)("v-main"),d=(0,o.g2)("v-app");return(0,o.uX)(),(0,o.Wv)(d,null,{default:(0,o.k6)((()=>[(0,o.bF)(u,null,{default:(0,o.k6)((()=>[(0,o.bF)(c,null,{default:(0,o.k6)((()=>[(0,o.bF)(s,null,{default:(0,o.k6)((()=>[(0,o.bF)(i,null,{default:(0,o.k6)((()=>[bt,kt])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}var Ct={name:"AboutPage"};const wt=(0,p.A)(Ct,[["render",yt],["__scopeId","data-v-d1f5a34e"]]);var Ft=wt;const It={class:"header"},xt={class:"page-title"};function Lt(e,t,a,n,l,r){const i=(0,o.g2)("MySlider"),s=(0,o.g2)("MySelector"),c=(0,o.g2)("MyPackage"),u=(0,o.g2)("MyReg"),d=(0,o.g2)("LaunchButton"),m=(0,o.g2)("tmReg"),p=(0,o.g2)("ImageUpLoader"),h=(0,o.g2)("CameraCapture");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",It,[(0,o.Lk)("h1",xt,(0,v.v_)(l.pageTitle),1)]),(0,o.bF)(i,{pageTitle:l.pageTitle,images:l.filteredImages},null,8,["pageTitle","images"]),(0,o.bF)(s,{plans:l.filteredPlans},null,8,["plans"]),(0,o.bF)(c,{pageTitle:l.pageTitle,plans:l.filteredPlans},null,8,["pageTitle","plans"]),(0,o.bF)(u),l.showLaunchButton?((0,o.uX)(),(0,o.Wv)(d,{key:0})):(0,o.Q3)("",!0),(0,o.bF)(m,{project:l.paramValue,onClose:t[0]||(t[0]=t=>e.showRegistration=!1)},null,8,["project"]),(0,o.bF)(p),(0,o.bF)(h)])}const St={class:"slider-container"},_t=["src","alt"],Rt=["onClick"];function $t(e,t,a,n,l,r){return(0,o.uX)(),(0,o.CE)("div",St,[(0,o.Lk)("div",{class:"slider-wrapper",style:(0,v.Tr)({transform:`translateX(-${100*l.currentIndex}%)`})},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.images,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{class:"slider-slide",key:t},[(0,o.Lk)("img",{src:e.src,alt:`Slide ${t+1}`,style:{width:"100%"}},null,8,_t),(0,o.Lk)("button",{class:"navigate-btn",onClick:t=>r.navigateTo(e.route,e.category)}," Go to "+(0,v.v_)(e.route),9,Rt)])))),128))],4),(0,o.Lk)("button",{class:"prev-btn",onClick:t[0]||(t[0]=(...e)=>r.prevSlide&&r.prevSlide(...e))},"❮"),(0,o.Lk)("button",{class:"next-btn",onClick:t[1]||(t[1]=(...e)=>r.nextSlide&&r.nextSlide(...e))},"❯")])}var Nt={name:"MySlider",props:{pageTitle:{type:String,default:""},images:{type:Array,required:!0}},data(){return{currentIndex:0,intervalId:null}},mounted(){this.startAutoPlay()},beforeUnmount(){this.stopAutoPlay()},methods:{startAutoPlay(){},stopAutoPlay(){clearInterval(this.intervalId)},prevSlide(){this.stopAutoPlay(),this.currentIndex=(this.currentIndex-1+this.images.length)%this.images.length,this.startAutoPlay()},nextSlide(){this.stopAutoPlay(),this.currentIndex=(this.currentIndex+1)%this.images.length,this.startAutoPlay()},navigateTo(e,t){this.$router.push({path:e,query:{param:t}})}}};const Et=(0,p.A)(Nt,[["render",$t],["__scopeId","data-v-e5bf1dc2"]]);var Dt=Et,Ut={components:{CameraCapture:pt,ImageUpLoader:R,tmReg:et,MySlider:Dt,MyPackage:ee,MySelector:de,LaunchButton:D},created(){this.paramValue=this.$route.query.param||"Default Title",this.pageTitle=this.paramValue,console.log("Received parameter:",this.paramValue),this.filterPlans(this.paramValue),this.filterImages(this.paramValue)},data(){return{showLaunchButton:!1,pageTitle:"",paramValue:"",imagesArray:[{src:"img/UniVerse.jpg",category:"HOME",route:"/home"},{src:"img/3.png",category:"HOME",route:"/winback"},{src:"img/2.png",category:"HOME",route:"/business"},{src:"img/4.png",category:"BUSINESS",route:"/business"},{src:"img/5.png",category:"BUSINESS",route:"/business"}],plansArray:[{category:"HOME",title:"Unifi Home 100Mbps",image:"img/unifihome1a.svg",price:"RM 89",features:["image: img/unifihome1a.svg, width=100, height=100, Unifi Home 100Mbps","Unlimited Data",'svg:width="20" height="20",<circle cx="10" cy="10" r="8" stroke="green" stroke-width="4" fill="yellow" />,Download speed: 100mbps',"Upload speed: 50mbps","Recommended for 2 - 3 users on up to 5 devices","Free Wi-Fi 5 router","Voice call flat rate 20 sen/min to all lines","24 months contract","Add On RM28/Month For Netflix","image: img/freeInternet.png","PROMO: 1 MONTH FREE",'svg:width="20" height="20",<circle cx="10" cy="10" r="8" stroke="green" stroke-width="4" fill="yellow" />,RM89/Month',"FREE Wi-Fi 5 CERTIFIED ROUTER"]},{category:"HOME",title:"Unifi Home 300Mbps",image:"img/unifihome1b.svg",price:"RM 129",features:["h2: Unifi Home 300Mbps","Unlimited Data","Download speed: 300mbps","Upload speed: 150mbps","Recommended for 5 - 8 users on up to 10 devices","Free Wi-Fi 6 router","Voice call flat rate 20 sen/min to all lines","24 months contract","Add On RM28/Month For Netflix","image: img/freeInternet.png, width=100, height=100, Free Internet!","PROMO: 1 MONTH FREE","RM129/Month","FREE Wi-Fi 6 CERTIFIED ROUTER"]},{category:"HOME",title:"Unifi Home 500Mbps",image:"img/unifihome1b.svg",price:"RM 149",features:["h2: Unifi Home 500Mbps","Unlimited Data","Download speed: 500mbps","Upload speed: 250mbps","Recommended for 8 - 10 users on up to 15 devices","Free Wi-Fi 6 router","Voice call flat rate 20 sen/min to all lines","24 months contract","Add On RM28/Month For Netflix","image: img/freeInternet.png, width=100, height=100, Free Internet!","PROMO: 1 MONTH FREE","RM189/Month","FREE Wi-Fi 6 CERTIFIED ROUTER"]},{category:"BUSINESS",title:"Unifi Home 100Mbps",image:"img/unifihome1a.svg",price:"RM 89",features:["image: img/unifihome1a.svg, width=100, height=100, Unifi BUSINESS 100Mbps","Unlimited Data",'svg:width="20" height="20",<circle cx="10" cy="10" r="8" stroke="green" stroke-width="4" fill="yellow" />,Download speed: 100mbps',"Upload speed: 50mbps","Recommended for 2 - 3 users on up to 5 devices","Free Wi-Fi 5 router","Voice call flat rate 20 sen/min to all lines","24 months contract","Add On RM28/Month For Netflix","image: img/freeInternet.png","PROMO: 1 MONTH FREE",'svg:width="20" height="20",<circle cx="10" cy="10" r="8" stroke="green" stroke-width="4" fill="yellow" />,RM89/Month',"FREE Wi-Fi 5 CERTIFIED ROUTER"]}],filteredPlans:[],filteredImages:[]}},methods:{goBack(){this.$router.go(-1)},filterPlans(e){this.filteredPlans=this.plansArray.filter((t=>t.category===e))},filterImages(e){this.filteredImages=this.imagesArray.filter((t=>t.category===e))}}};const Mt=(0,p.A)(Ut,[["render",Lt]]);var Pt=Mt;const Tt={class:"header"},Wt={class:"page-title"};function At(e,t,a,n,l,r){const i=(0,o.g2)("MySlider"),s=(0,o.g2)("MySelector"),c=(0,o.g2)("MyPackage"),u=(0,o.g2)("MyReg"),d=(0,o.g2)("LaunchButton"),m=(0,o.g2)("tmReg"),p=(0,o.g2)("ImageUpLoader"),h=(0,o.g2)("CameraCapture");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",Tt,[(0,o.Lk)("h1",Wt,(0,v.v_)(l.pageTitle),1)]),(0,o.bF)(i,{pageTitle:l.pageTitle,images:l.filteredImages},null,8,["pageTitle","images"]),(0,o.bF)(s,{plans:l.filteredPlans},null,8,["plans"]),(0,o.bF)(c,{pageTitle:l.pageTitle,plans:l.filteredPlans},null,8,["pageTitle","plans"]),(0,o.bF)(u),l.showLaunchButton?((0,o.uX)(),(0,o.Wv)(d,{key:0})):(0,o.Q3)("",!0),(0,o.bF)(m,{project:l.paramValue,onClose:t[0]||(t[0]=t=>e.showRegistration=!1)},null,8,["project"]),(0,o.bF)(p),(0,o.bF)(h)])}var jt={components:{CameraCapture:pt,ImageUpLoader:R,tmReg:et,MySlider:Dt,MyPackage:ee,MySelector:de,LaunchButton:D},created(){this.paramValue=this.$route.query.param||"Default Title",this.pageTitle=this.paramValue,console.log("Received parameter:",this.paramValue),this.filterPlans(this.paramValue),this.filterImages(this.paramValue)},data(){return{showLaunchButton:!1,pageTitle:"",paramValue:"",imagesArray:[{src:"img/UniVerse.jpg",category:"HOME",route:"/home"},{src:"img/3.png",category:"HOME",route:"/winback"},{src:"img/2.png",category:"HOME",route:"/business"},{src:"img/4.png",category:"BUSINESS",route:"/business"},{src:"img/5.png",category:"BUSINESS",route:"/business"}],plansArray:[{category:"HOME",title:"Unifi Home 100Mbps",image:"img/unifihome1a.svg",price:"RM 89",features:["image: img/unifihome1a.svg, width=100, height=100, Unifi Home 100Mbps","Unlimited Data",'svg:width="20" height="20",<circle cx="10" cy="10" r="8" stroke="green" stroke-width="4" fill="yellow" />,Download speed: 100mbps',"Upload speed: 50mbps","Recommended for 2 - 3 users on up to 5 devices","Free Wi-Fi 5 router","Voice call flat rate 20 sen/min to all lines","24 months contract","Add On RM28/Month For Netflix","image: img/freeInternet.png","PROMO: 1 MONTH FREE",'svg:width="20" height="20",<circle cx="10" cy="10" r="8" stroke="green" stroke-width="4" fill="yellow" />,RM89/Month',"FREE Wi-Fi 5 CERTIFIED ROUTER"]},{category:"HOME",title:"Unifi Home 300Mbps",image:"img/unifihome1b.svg",price:"RM 129",features:["h2: Unifi Home 300Mbps","Unlimited Data","Download speed: 300mbps","Upload speed: 150mbps","Recommended for 5 - 8 users on up to 10 devices","Free Wi-Fi 6 router","Voice call flat rate 20 sen/min to all lines","24 months contract","Add On RM28/Month For Netflix","image: img/freeInternet.png, width=100, height=100, Free Internet!","PROMO: 1 MONTH FREE","RM129/Month","FREE Wi-Fi 6 CERTIFIED ROUTER"]},{category:"HOME",title:"Unifi Home 500Mbps",image:"img/unifihome1b.svg",price:"RM 149",features:["h2: Unifi Home 500Mbps","Unlimited Data","Download speed: 500mbps","Upload speed: 250mbps","Recommended for 8 - 10 users on up to 15 devices","Free Wi-Fi 6 router","Voice call flat rate 20 sen/min to all lines","24 months contract","Add On RM28/Month For Netflix","image: img/freeInternet.png, width=100, height=100, Free Internet!","PROMO: 1 MONTH FREE","RM189/Month","FREE Wi-Fi 6 CERTIFIED ROUTER"]},{category:"BUSINESS",title:"Unifi Home 100Mbps",image:"img/unifihome1a.svg",price:"RM 89",features:["image: img/unifihome1a.svg, width=100, height=100, Unifi BUSINESS 100Mbps","Unlimited Data",'svg:width="20" height="20",<circle cx="10" cy="10" r="8" stroke="green" stroke-width="4" fill="yellow" />,Download speed: 100mbps',"Upload speed: 50mbps","Recommended for 2 - 3 users on up to 5 devices","Free Wi-Fi 5 router","Voice call flat rate 20 sen/min to all lines","24 months contract","Add On RM28/Month For Netflix","image: img/freeInternet.png","PROMO: 1 MONTH FREE",'svg:width="20" height="20",<circle cx="10" cy="10" r="8" stroke="green" stroke-width="4" fill="yellow" />,RM89/Month',"FREE Wi-Fi 5 CERTIFIED ROUTER"]}],filteredPlans:[],filteredImages:[]}},methods:{goBack(){this.$router.go(-1)},filterPlans(e){this.filteredPlans=this.plansArray.filter((t=>t.category===e))},filterImages(e){this.filteredImages=this.imagesArray.filter((t=>t.category===e))}}};const Ot=(0,p.A)(jt,[["render",At]]);var Vt=Ot;function Bt(e,t,a,n,l,r){const i=(0,o.g2)("v-col"),s=(0,o.g2)("v-row"),c=(0,o.g2)("v-container");return(0,o.uX)(),(0,o.Wv)(c,{fluid:"",class:"d-flex align-center justify-center",style:{height:"100vh"}},{default:(0,o.k6)((()=>[(0,o.bF)(s,{justify:"center",align:"center"},{default:(0,o.k6)((()=>[(0,o.bF)(i,{cols:"12",sm:"8"})])),_:1})])),_:1})}var Xt={name:"MainPage",data(){return{images:[{src:"img/UniVerse.jpg",alt:"Image 1",route:"/home",param:"HOME"},{src:"img/switch.png",alt:"Image 3",route:"/home",param:"WIN BACK"},{src:"img/business.jpeg",alt:"Image 2",route:"/home",param:"BUSINESS"}]}},methods:{navigateTo(e,t){this.$router.push({path:e,query:{param:t}})}}};const qt=(0,p.A)(Xt,[["render",Bt],["__scopeId","data-v-58c60cfa"]]);var Ht=qt;const Jt=e=>((0,o.Qi)("data-v-2f3ac57d"),e=e(),(0,o.jt)(),e),Kt={type:"text",ref:"myInput",class:"borderless-input"},Yt={key:0},Qt={key:2},zt={key:4},Gt=Jt((()=>(0,o.Lk)("br",null,null,-1))),Zt=Jt((()=>(0,o.Lk)("br",null,null,-1))),ea=Jt((()=>(0,o.Lk)("br",null,null,-1))),ta={class:"text-center"},aa=Jt((()=>(0,o.Lk)("h3",null,"Load JSON",-1))),na=Jt((()=>(0,o.Lk)("h3",null,"Load CSV",-1))),oa={key:0,class:"error"},la={class:"button-container"},ra=["onClick"],ia=["onUpdate:modelValue"],sa=["onUpdate:modelValue"],ca=["onUpdate:modelValue"],ua=["onUpdate:modelValue"],da=["onUpdate:modelValue"],ma=["onUpdate:modelValue"],pa=["onUpdate:modelValue"],ha=["onUpdate:modelValue"],ga=["onUpdate:modelValue"],fa=["onUpdate:modelValue"],va=["onUpdate:modelValue"],ba={style:{color:"blue",width:"50%","min-width":"40px"}},ka={style:{color:"blue",width:"50%","min-width":"40px"}},ya=["onUpdate:modelValue"],Ca=Jt((()=>(0,o.Lk)("option",{value:""},"Select a date",-1))),wa=["value"],Fa=["onUpdate:modelValue"],Ia=Jt((()=>(0,o.Lk)("option",{value:""},"Select a date",-1))),xa=["value"],La=["onUpdate:modelValue"],Sa=Jt((()=>(0,o.Lk)("div",null,"There are two copies of this contact:",-1))),_a=Jt((()=>(0,o.Lk)("h3",null,"Server Copy",-1))),Ra=Jt((()=>(0,o.Lk)("h3",null,"Local Copy",-1))),$a=Jt((()=>(0,o.Lk)("p",null,"-",-1)));function Na(e,t,a,l,r,i){const s=(0,o.g2)("v-icon"),c=(0,o.g2)("v-btn"),u=(0,o.g2)("v-row"),d=(0,o.g2)("v-textarea"),m=(0,o.g2)("v-text-field"),p=(0,o.g2)("v-col"),h=(0,o.g2)("v-form"),g=(0,o.g2)("v-container"),f=(0,o.g2)("v-progress-linear"),b=(0,o.g2)("v-select"),k=(0,o.g2)("CountdownTimer"),y=(0,o.g2)("v-data-table"),C=(0,o.g2)("v-card-title"),w=(0,o.g2)("v-card-text"),F=(0,o.g2)("v-card-actions"),I=(0,o.g2)("v-card"),x=(0,o.g2)("v-dialog");return(0,o.uX)(),(0,o.CE)("div",null,[r.showform?((0,o.uX)(),(0,o.Wv)(g,{key:0},{default:(0,o.k6)((()=>[(0,o.bF)(h,{ref:"contactForm"},{default:(0,o.k6)((()=>[r.viewOnly?((0,o.uX)(),(0,o.Wv)(u,{key:0,class:"d-flex align-center"},{default:(0,o.k6)((()=>[(0,o.bF)(c,{rounded:"",href:`tel:${i.currentContact.phoneNumber}`,color:"primary",style:{width:"20%","min-width":"20px"},disabled:i.isPhoneDisabled(i.currentContact),onClick:i.updateCallCount},{default:(0,o.k6)((()=>[i.isPhoneDisabled(i.currentContact)?((0,o.uX)(),(0,o.Wv)(s,{key:0},{default:(0,o.k6)((()=>[(0,o.eW)("mdi-phone-off")])),_:1})):((0,o.uX)(),(0,o.Wv)(s,{key:1},{default:(0,o.k6)((()=>[(0,o.eW)("mdi-phone-in-talk")])),_:1}))])),_:1},8,["href","disabled","onClick"]),(0,o.bF)(c,{rounded:"",onClick:i.nextContact,disabled:r.currentIndex===l.contacts.length-1,color:"primary",class:"mx-1",style:{width:"20%","min-width":"20px"}},{default:(0,o.k6)((()=>[(0,o.bF)(s,null,{default:(0,o.k6)((()=>[(0,o.eW)("mdi-arrow-right")])),_:1})])),_:1},8,["onClick","disabled"]),(0,o.bF)(c,{rounded:"",onClick:i.previousContact,disabled:0===r.currentIndex,color:"primary",class:"mx-1",style:{width:"20%","min-width":"20px"}},{default:(0,o.k6)((()=>[(0,o.bF)(s,null,{default:(0,o.k6)((()=>[(0,o.eW)("mdi-arrow-left")])),_:1})])),_:1},8,["onClick","disabled"]),(0,o.bF)(c,{rounded:"",onClick:t[0]||(t[0]=e=>l.makeCall(i.currentContact)),color:i.isPhoneDisabled(i.currentContact)?"grey":"primary",style:{width:"20%","min-width":"20px"},disabled:i.isPhoneDisabled(i.currentContact)},{default:(0,o.k6)((()=>[i.isPhoneDisabled(i.currentContact)?((0,o.uX)(),(0,o.Wv)(s,{key:0},{default:(0,o.k6)((()=>[(0,o.eW)("mdi-phone-off")])),_:1})):((0,o.uX)(),(0,o.Wv)(s,{key:1},{default:(0,o.k6)((()=>[(0,o.eW)("mdi-cellphone-wireless")])),_:1}))])),_:1},8,["color","disabled"])])),_:1})):(0,o.Q3)("",!0),r.viewOnly?((0,o.uX)(),(0,o.Wv)(u,{key:1,class:"d-flex align-center"},{default:(0,o.k6)((()=>[(0,o.bF)(c,{rounded:"",onClick:t[1]||(t[1]=e=>i.navigateToTalk(i.currentContact)),color:"primary",class:"mx-1",style:{width:"20%","min-width":"20px"}},{default:(0,o.k6)((()=>[(0,o.bF)(s,null,{default:(0,o.k6)((()=>[(0,o.eW)("mdi-book-account")])),_:1})])),_:1}),(0,o.bF)(c,{rounded:"",onClick:t[2]||(t[2]=t=>{e.$refs.myInput2.focus()}),color:"primary",class:"mx-1",style:{width:"20%","min-width":"20px"}},{default:(0,o.k6)((()=>[(0,o.bF)(s,null,{default:(0,o.k6)((()=>[(0,o.eW)("mdi-table")])),_:1})])),_:1}),(0,o.bF)(c,{rounded:"",onClick:t[3]||(t[3]=e=>{this.viewOnly=!1}),color:"primary",style:{width:"20%","min-width":"20px"}},{default:(0,o.k6)((()=>[(0,o.bF)(s,null,{default:(0,o.k6)((()=>[(0,o.eW)("mdi-pencil")])),_:1}),(0,o.eW)(" Edit ")])),_:1})])),_:1})):(0,o.Q3)("",!0),r.viewOnly?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.Wv)(u,{key:2},{default:(0,o.k6)((()=>[(0,o.bF)(c,{rounded:"",onClick:t[4]||(t[4]=e=>i.CallSuccess(i.currentContact)),color:i.isPhoneDisabled(i.currentContact)?"grey":"primary",style:{width:"20%","min-width":"20px"},disabled:i.isPhoneDisabled(i.currentContact)},{default:(0,o.k6)((()=>[(0,o.bF)(s,null,{default:(0,o.k6)((()=>[(0,o.eW)("mdi-stamper")])),_:1})])),_:1},8,["color","disabled"]),(0,o.bF)(c,{rounded:"",onClick:e.cancelEdit,color:"grey",style:{width:"25%","min-width":"20px"}},{default:(0,o.k6)((()=>[(0,o.bF)(s,null,{default:(0,o.k6)((()=>[(0,o.eW)('mdi-cancel">')])),_:1}),(0,o.eW)(" Cancel ")])),_:1},8,["onClick"]),(0,o.bF)(c,{rounded:"",onClick:i.addContact,color:"primary",style:{width:"25%","min-width":"20px"}},{default:(0,o.k6)((()=>[(0,o.bF)(s,null,{default:(0,o.k6)((()=>[(0,o.eW)("mdi-plus")])),_:1}),(0,o.eW)(" Add ")])),_:1},8,["onClick"]),(0,o.bF)(c,{rounded:"",onClick:i.deleteContact,color:"red",style:{width:"25%","min-width":"20px"}},{default:(0,o.k6)((()=>[(0,o.bF)(s,null,{default:(0,o.k6)((()=>[(0,o.eW)("mdi-minus")])),_:1}),(0,o.eW)(" Delete ")])),_:1},8,["onClick"]),(0,o.bF)(c,{rounded:"",onClick:t[5]||(t[5]=e=>{this.viewOnly=!0}),color:"primary",style:{width:"25%","min-width":"20px"}},{default:(0,o.k6)((()=>[(0,o.bF)(s,null,{default:(0,o.k6)((()=>[(0,o.eW)("mdi-close")])),_:1}),(0,o.eW)(" Close ")])),_:1})])),_:1})),(0,o.Lk)("input",Kt,null,512),(0,o.bF)(u,null,{default:(0,o.k6)((()=>[(0,o.bF)(p,{cols:"12",md:"6"},{default:(0,o.k6)((()=>[(0,o.eW)(" No: "+(0,v.v_)(i.currentContact.no)+" Project: "+(0,v.v_)(i.currentContact.project)+" ",1),(0,o.Lk)("h2",null,(0,v.v_)(i.currentContact.name),1),(0,o.eW)(" Phone: "+(0,v.v_)(i.currentContact.phoneNumber)+" ",1),r.viewOnly?((0,o.uX)(),(0,o.CE)("div",Yt," Interaction: "+(0,v.v_)(i.currentContact.interaction),1)):((0,o.uX)(),(0,o.Wv)(d,{key:1,modelValue:i.currentContact.interaction,"onUpdate:modelValue":t[6]||(t[6]=e=>i.currentContact.interaction=e),label:"Interaction",outlined:"",class:(0,v.C4)(r.viewOnly?"":"edit-mode")},null,8,["modelValue","class"])),r.viewOnly?((0,o.uX)(),(0,o.CE)("div",Qt," Doc: "+(0,v.v_)(i.currentContact.doc),1)):((0,o.uX)(),(0,o.Wv)(m,{key:3,label:"Doc",modelValue:i.currentContact.doc,"onUpdate:modelValue":t[7]||(t[7]=e=>i.currentContact.doc=e),class:(0,v.C4)(r.viewOnly?"":"edit-mode")},null,8,["modelValue","class"])),r.viewOnly?((0,o.uX)(),(0,o.CE)("div",zt," Status (ni,nr,nis,ct): "+(0,v.v_)(i.currentContact.status),1)):((0,o.uX)(),(0,o.Wv)(m,{key:5,label:"Status",modelValue:i.currentContact.status,"onUpdate:modelValue":t[8]||(t[8]=e=>i.currentContact.status=e),class:(0,v.C4)(r.viewOnly?"":"edit-mode")},null,8,["modelValue","class"]))])),_:1}),(0,o.bF)(p,{cols:"12",md:"6"},{default:(0,o.k6)((()=>[(0,o.eW)(" Phone ID:"+(0,v.v_)(i.currentContact.phoneId),1)])),_:1}),(0,o.bF)(p,{style:{color:"blue",width:"50%","min-width":"40px"}},{default:(0,o.k6)((()=>[(0,o.eW)(" Today: "+(0,v.v_)(l.formattedDate)+" ",1),Gt,(0,o.eW)(" Dialed Date: "+(0,v.v_)(i.currentContact.dialedDate),1)])),_:1}),(0,o.bF)(p,{cols:"12",md:"6"},{default:(0,o.k6)((()=>[(0,o.eW)(" Last Call:"+(0,v.v_)(i.currentContact.lastCall),1)])),_:1}),(0,o.bF)(p,{cols:"12",md:"6"},{default:(0,o.k6)((()=>[(0,o.eW)(" Contacted:"+(0,v.v_)(i.currentContact.contacted),1)])),_:1}),(0,o.bF)(p,{cols:"12",md:"6"},{default:(0,o.k6)((()=>[(0,o.eW)(" User:"+(0,v.v_)(i.currentContact.user),1)])),_:1}),(0,o.bF)(p,{cols:"12",md:"6"},{default:(0,o.k6)((()=>[(0,o.eW)(" Called:"+(0,v.v_)(i.currentContact.called),1)])),_:1}),(0,o.bF)(p,{cols:"12",md:"6"},{default:(0,o.k6)((()=>[(0,o.eW)(" Occupation:"+(0,v.v_)(i.currentContact.occupation),1)])),_:1})])),_:1})])),_:1},512)])),_:1})):(0,o.Q3)("",!0),(0,o.Lk)("div",null,[Zt,ea,(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>r.filterTerm=e),placeholder:"Search..."},null,512),[[n.Jo,r.filterTerm]]),(0,o.bF)(g,{class:"bg-surface-variant"},{default:(0,o.k6)((()=>[(0,o.bF)(u,null,{default:(0,o.k6)((()=>[(0,o.bF)(p,{class:"justify-start align-left"},{default:(0,o.k6)((()=>[(0,o.eW)(" V2.05 ")])),_:1}),(0,o.bF)(p,{class:"justify-start align-left"},{default:(0,o.k6)((()=>[(0,o.bF)(c,{onClick:t[10]||(t[10]=e=>i.loadContactsFromStrapi(r.findValue2)),color:"success"},{default:(0,o.k6)((()=>[(0,o.eW)(" Download from Strapi ")])),_:1}),(0,o.eW)(" Import Project "),(0,o.bo)((0,o.Lk)("input",{class:"bordered-input",type:"text",id:"findValue2","onUpdate:modelValue":t[11]||(t[11]=e=>r.findValue2=e),style:{color:"white","background-color":"#333"}},null,512),[[n.Jo,r.findValue2]])])),_:1}),(0,o.bF)(p,{class:"d-flex align-left"},{default:(0,o.k6)((()=>[(0,o.bF)(c,{onClick:t[12]||(t[12]=e=>i.exportToStrapi()),color:"success"},{default:(0,o.k6)((()=>[(0,o.eW)(" Upload to Strapi ")])),_:1}),(0,o.Lk)("div",null,[(0,o.bF)(f,{value:r.progressPercentage,height:"10",color:"primary",class:"my-4"},null,8,["value"]),(0,o.Lk)("div",ta,[(0,o.Lk)("span",null,"Progress: "+(0,v.v_)(r.progressPercentage.toFixed(2))+"%",1)])])])),_:1}),(0,o.eW)(" Message: "),(0,o.bo)((0,o.Lk)("input",{class:"bordered-input",type:"text",id:"sendmsg","onUpdate:modelValue":t[13]||(t[13]=e=>r.sendmsg=e)},null,512),[[n.Jo,r.sendmsg]]),(0,o.bF)(p,{class:"d-flex align-left"},{default:(0,o.k6)((()=>[(0,o.bF)(c,{onClick:i.printTable,color:"success"},{default:(0,o.k6)((()=>[(0,o.eW)("Print PDF")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})]),(0,o.bF)(u,{class:"d-flex align-center"},{default:(0,o.k6)((()=>[(0,o.bF)(p,null,{default:(0,o.k6)((()=>[(0,o.bF)(c,{onClick:i.sendwhatsappmessage,class:"sort-button"},{default:(0,o.k6)((()=>[(0,o.eW)("Send via WhatsApp (W)")])),_:1},8,["onClick"])])),_:1}),(0,o.bF)(p,null,{default:(0,o.k6)((()=>[(0,o.bF)(c,{onClick:i.startProcessing,class:"sort-button"},{default:(0,o.k6)((()=>[(0,o.eW)("Start W")])),_:1},8,["onClick"])])),_:1}),(0,o.bF)(p,null,{default:(0,o.k6)((()=>[aa,(0,o.Lk)("input",{type:"file",onChange:t[14]||(t[14]=(...e)=>i.loadJSONFile&&i.loadJSONFile(...e)),ref:"jsonFileInput"},null,544)])),_:1}),(0,o.bF)(p,null,{default:(0,o.k6)((()=>[(0,o.bF)(c,{onClick:i.exportToJSON,class:"sort-button"},{default:(0,o.k6)((()=>[(0,o.eW)("Export to JSON")])),_:1},8,["onClick"])])),_:1}),(0,o.bF)(p,null,{default:(0,o.k6)((()=>[(0,o.bF)(c,{onClick:i.removeDuplicatePhoneNumbers,class:"sort-button"},{default:(0,o.k6)((()=>[(0,o.eW)("Remove Duplicate")])),_:1},8,["onClick"])])),_:1}),(0,o.bF)(p,null,{default:(0,o.k6)((()=>[na,(0,o.Lk)("input",{"data-v-002fd7de":"",type:"file",accept:".csv",onChange:t[15]||(t[15]=(...e)=>i.loadCSVFile&&i.loadCSVFile(...e)),ref:"fileInput"},null,544)])),_:1}),(0,o.bF)(p,null,{default:(0,o.k6)((()=>[(0,o.bF)(c,{onClick:i.exportToCSV,class:"sort-button"},{default:(0,o.k6)((()=>[(0,o.eW)("Export to CSV")])),_:1},8,["onClick"])])),_:1})])),_:1}),(0,o.Lk)("div",null,[r.error?((0,o.uX)(),(0,o.CE)("div",oa,(0,v.v_)(r.error),1)):(0,o.Q3)("",!0),(0,o.Lk)("div",la,[(0,o.Lk)("button",{onClick:t[16]||(t[16]=e=>i.sortContacts("phoneNumber")),class:"sort-button"}," Sort by Phone Number ("+(0,v.v_)(r.sortOrder.phoneNumber)+") ",1),(0,o.Lk)("button",{onClick:t[17]||(t[17]=e=>i.sortContacts("name")),class:"sort-button"}," Sort by Name ("+(0,v.v_)(r.sortOrder.name)+") ",1),(0,o.Lk)("button",{onClick:t[18]||(t[18]=e=>i.sortContactsAndNumber("project")),class:"sort-button"}," Sort by Project ("+(0,v.v_)(r.sortOrder.project)+") ",1),(0,o.Lk)("button",{onClick:t[19]||(t[19]=e=>i.sortContacts("no")),class:"sort-button"}," Sort by No ("+(0,v.v_)(r.sortOrder.no)+") ",1),(0,o.Lk)("button",{onClick:t[20]||(t[20]=e=>i.sortContactsAndNumber("status")),class:"sort-button"}," Sort by Status ("+(0,v.v_)(r.sortOrder.status)+") ",1),(0,o.Lk)("button",{onClick:t[21]||(t[21]=e=>i.sortContacts("nextCall")),class:"sort-button"}," Sort by Next Call ("+(0,v.v_)(r.sortOrder.nextCall)+") ",1)]),(0,o.bF)(u,null,{default:(0,o.k6)((()=>[(0,o.bF)(p,null,{default:(0,o.k6)((()=>[(0,o.bF)(b,{modelValue:l.selectedUser,"onUpdate:modelValue":t[22]||(t[22]=e=>l.selectedUser=e),items:r.users,"item-text":"text","item-value":"value",label:"Select a user",style:{width:"50%","min-width":"120px"}},null,8,["modelValue","items"])])),_:1}),(0,o.bF)(p,null,{default:(0,o.k6)((()=>[(0,o.eW)(" Search "),(0,o.bo)((0,o.Lk)("input",{class:"bordered-input",ref:"myInput2",type:"text",id:"findValue","onUpdate:modelValue":t[23]||(t[23]=e=>r.findValue=e),style:{color:"white","background-color":"#333"}},null,512),[[n.Jo,r.findValue]])])),_:1}),(0,o.bF)(p,null,{default:(0,o.k6)((()=>[(0,o.Lk)("button",{class:"bordered-input",onClick:t[24]||(t[24]=(...e)=>i.jumpToIndex&&i.jumpToIndex(...e))},"By Row No.")])),_:1}),(0,o.bF)(p,null,{default:(0,o.k6)((()=>[(0,o.Lk)("button",{class:"bordered-input",onClick:t[25]||(t[25]=(...e)=>i.findNumber&&i.findNumber(...e))},"By Phone Number")])),_:1}),(0,o.bF)(p,null,{default:(0,o.k6)((()=>[(0,o.Lk)("button",{class:"bordered-input",onClick:t[26]||(t[26]=(...e)=>i.findName&&i.findName(...e))},"By Name")])),_:1}),(0,o.bF)(p,{class:"d-flex justify-end"},{default:(0,o.k6)((()=>[(0,o.bF)(c,{onClick:t[27]||(t[27]=e=>r.showCountdown=!r.showCountdown),color:"primary"},{default:(0,o.k6)((()=>[(0,o.eW)((0,v.v_)(r.showCountdown?"Hide Countdown":"Show Countdown"),1)])),_:1})])),_:1}),(0,o.bF)(p,{class:"align-right"},{default:(0,o.k6)((()=>[r.showCountdown?((0,o.uX)(),(0,o.Wv)(k,{key:0,ref:"countdown",seconds:5,onCountdownFinish:i.countdownFinished},null,8,["onCountdownFinish"])):(0,o.Q3)("",!0)])),_:1})])),_:1}),(0,o.bF)(y,{id:"tableToPrint",headers:r.headers2,items:i.filteredContacts,class:"elevation-1 pdf-container","hide-default-footer":"","items-per-page":1e4,style:{width:"100%"}},{item:(0,o.k6)((({item:a,index:u})=>[(0,o.Lk)("tr",{class:(0,v.C4)({highlight:r.currentIndex===u}),onClick:e=>i.rowClick(u)},[(0,o.Lk)("td",null,[(0,o.bF)(c,{onClick:t[28]||(t[28]=t=>{r.showform=!0,e.$refs.myInput.focus()}),color:"error",small:"",icon:"",style:{width:"50%","min-width":"40px"}},{default:(0,o.k6)((()=>[(0,o.bF)(s,null,{default:(0,o.k6)((()=>[(0,o.eW)("mdi-eye")])),_:1})])),_:1})]),(0,o.Lk)("td",null,[(0,o.bF)(c,{onClick:e=>i.removeContact(u),color:"error",small:"",icon:"",style:{width:"50%","min-width":"40px"}},{default:(0,o.k6)((()=>[(0,o.bF)(s,null,{default:(0,o.k6)((()=>[(0,o.eW)("mdi-delete")])),_:1})])),_:2},1032,["onClick"])]),(0,o.Lk)("td",null,[(0,o.bF)(c,{onClick:e=>i.rowSendWhatsApp(a),color:"primary",small:"",icon:"",style:{width:"50%","min-width":"40px"}},{default:(0,o.k6)((()=>[(0,o.bF)(s,null,{default:(0,o.k6)((()=>[(0,o.eW)("mdi-whatsapp")])),_:1})])),_:2},1032,["onClick"])]),(0,o.Lk)("td",null,[(0,o.bF)(c,{onClick:e=>l.makeCall(a),color:"primary",small:"",icon:"",style:{width:"50%","min-width":"40px"},disabled:i.isPhoneDisabled(a)},{default:(0,o.k6)((()=>[i.isPhoneDisabled(a)?((0,o.uX)(),(0,o.Wv)(s,{key:0},{default:(0,o.k6)((()=>[(0,o.eW)("mdi-phone-off")])),_:1})):((0,o.uX)(),(0,o.Wv)(s,{key:1},{default:(0,o.k6)((()=>[(0,o.eW)("mdi-cellphone-wireless")])),_:1}))])),_:2},1032,["onClick","disabled"])]),(0,o.Lk)("td",null,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e=>a.project=e,style:{width:"100%","min-width":"50px"}},null,8,ia),[[n.Jo,a.project]])]),(0,o.Lk)("td",null,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e=>a.source=e,style:{width:"100%","min-width":"80px"}},null,8,sa),[[n.Jo,a.source]])]),(0,o.Lk)("td",null,(0,v.v_)(a.no),1),(0,o.Lk)("td",null,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e=>a.name=e},null,8,ca),[[n.Jo,a.name]])]),(0,o.Lk)("td",null,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e=>a.language=e,style:{width:"100%","min-width":"5px"}},null,8,ua),[[n.Jo,a.language]])]),(0,o.Lk)("td",null,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e=>a.phoneId=e,style:{width:"100%","min-width":"5x"}},null,8,da),[[n.Jo,a.phoneId]])]),(0,o.Lk)("td",null,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e=>a.phoneNumber=e,style:{width:"100%","min-width":"120px"}},null,8,ma),[[n.Jo,a.phoneNumber]])]),(0,o.Lk)("td",null,[(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":e=>a.interaction=e,style:{width:"100%","min-width":"250px"}},null,8,pa),[[n.Jo,a.interaction]])]),(0,o.Lk)("td",null,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e=>a.status=e,style:{width:"50%","min-width":"40px"}},null,8,ha),[[n.Jo,a.status]])]),(0,o.Lk)("td",null,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e=>a.doc=e,style:{width:"50%","min-width":"80px"}},null,8,ga),[[n.Jo,a.doc]])]),(0,o.Lk)("td",null,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e=>a.called=e,style:{width:"50%","min-width":"80px"}},null,8,fa),[[n.Jo,a.called]])]),(0,o.Lk)("td",null,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e=>a.contacted=e,style:{width:"50%","min-width":"40px"}},null,8,va),[[n.Jo,a.contacted]])]),(0,o.Lk)("td",ba,(0,v.v_)(a.dialedDate),1),(0,o.Lk)("td",ka,(0,v.v_)(a.updatedAt),1),(0,o.Lk)("td",null,[(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":e=>a.lastCall=e},[Ca,((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.availableDates,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,v.v_)(e),9,wa)))),128))],8,ya),[[n.u1,a.lastCall]])]),(0,o.Lk)("td",null,[(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":e=>a.nextCall=e},[Ia,((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.availableDates,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,v.v_)(e),9,xa)))),128))],8,Fa),[[n.u1,a.nextCall]])]),(0,o.Lk)("td",null,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e=>a.na1=e,style:{width:"50%","min-width":"40px"}},null,8,La),[[n.Jo,a.na1]])])],10,ra)])),_:1},8,["headers","items"])]),(0,o.bF)(x,{modelValue:r.dialog,"onUpdate:modelValue":t[31]||(t[31]=e=>r.dialog=e),"max-width":"660px"},{default:(0,o.k6)((()=>[(0,o.bF)(I,null,{default:(0,o.k6)((()=>[(0,o.bF)(C,null,{default:(0,o.k6)((()=>[(0,o.eW)("Duplicate Contact Found")])),_:1}),(0,o.bF)(w,null,{default:(0,o.k6)((()=>[Sa,(0,o.bF)(u,null,{default:(0,o.k6)((()=>[(0,o.bF)(p,null,{default:(0,o.k6)((()=>[_a,(0,o.Lk)("p",null,"Source: "+(0,v.v_)(e.existingContact.source),1),(0,o.Lk)("p",null,"Name: "+(0,v.v_)(e.existingContact.name),1),(0,o.Lk)("p",null,"Phone Number: "+(0,v.v_)(e.existingContact.phoneNumber),1),(0,o.Lk)("p",null,"Status: "+(0,v.v_)(e.existingContact.status),1),(0,o.Lk)("p",null,"Project: "+(0,v.v_)(e.existingContact.project),1),(0,o.Lk)("p",null,"Interaction: "+(0,v.v_)(e.existingContact.interaction),1),(0,o.Lk)("p",null,"User: "+(0,v.v_)(e.existingContact.user),1),(0,o.Lk)("p",null,"Phone Id: "+(0,v.v_)(e.existingContact.phoneId),1),(0,o.Lk)("p",null,"Id: "+(0,v.v_)(e.existingContact.id),1)])),_:1}),(0,o.bF)(p,null,{default:(0,o.k6)((()=>[Ra,(0,o.Lk)("p",null,"Source: "+(0,v.v_)(e.contact.source),1),(0,o.Lk)("p",null,"Name: "+(0,v.v_)(e.contact.name),1),(0,o.Lk)("p",null,"Phone Number: "+(0,v.v_)(e.contact.phoneNumber),1),(0,o.Lk)("p",null,"Status: "+(0,v.v_)(e.contact.status),1),(0,o.Lk)("p",null,"Project: "+(0,v.v_)(e.contact.project),1),(0,o.Lk)("p",null,"Interaction: "+(0,v.v_)(e.contact.interaction),1),(0,o.Lk)("p",null,"User: "+(0,v.v_)(l.selectedUser),1),(0,o.Lk)("p",null,"Phone Id: "+(0,v.v_)(e.contact.phoneId),1),$a])),_:1})])),_:1})])),_:1}),(0,o.bF)(F,{class:"d-flex justify-space-between"},{default:(0,o.k6)((()=>[(0,o.Lk)("div",null,[(0,o.bF)(c,{text:"",color:"red",onClick:t[29]||(t[29]=t=>e.confirmDelete("server"))},{default:(0,o.k6)((()=>[(0,o.eW)("Delete Server Copy")])),_:1}),(0,o.bF)(c,{text:"",color:"blue",onClick:t[30]||(t[30]=t=>e.confirmDelete("local"))},{default:(0,o.k6)((()=>[(0,o.eW)("Delete Local Copy")])),_:1}),(0,o.bF)(c,{onClick:e.cancelDelete},{default:(0,o.k6)((()=>[(0,o.eW)("Cancel")])),_:1},8,["onClick"])])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}a(3375),a(9225),a(3972),a(9209),a(5714),a(7561),a(6197),a(4603),a(7566),a(8721);var Ea=a(4537),Da=a(2391),Ua=a(88);const Ma=new Ea.P({uri:"https://sp412b-763ef468411d.herokuapp.com/graphql"}),Pa=new Da.R({link:Ma,cache:new Ua.D});var Ta=Pa,Wa=a(8055),Aa=a.n(Wa),ja=a(3833),Oa=a.n(ja),Va=a(4809),Ba=a.n(Va);function Xa(e,t,a,n,l,r){const i=(0,o.g2)("v-card-title"),s=(0,o.g2)("v-card-subtitle"),c=(0,o.g2)("v-btn"),u=(0,o.g2)("v-card-actions"),d=(0,o.g2)("v-text-field"),m=(0,o.g2)("v-card");return(0,o.uX)(),(0,o.Wv)(m,{class:"mx-auto","max-width":"400"},{default:(0,o.k6)((()=>[(0,o.bF)(i,null,{default:(0,o.k6)((()=>[(0,o.eW)("Countdown Timer")])),_:1}),l.timeRemaining>0?((0,o.uX)(),(0,o.Wv)(s,{key:0},{default:(0,o.k6)((()=>[(0,o.eW)((0,v.v_)(l.timeRemaining)+" seconds remaining",1)])),_:1})):((0,o.uX)(),(0,o.Wv)(s,{key:1},{default:(0,o.k6)((()=>[(0,o.eW)("Time's up! Restarting...")])),_:1})),(0,o.bF)(s,null,{default:(0,o.k6)((()=>[(0,o.eW)("Send Count: "+(0,v.v_)(l.restartCount),1)])),_:1}),(0,o.bF)(u,null,{default:(0,o.k6)((()=>[(0,o.bF)(c,{onClick:r.startCountdown,disabled:l.isRunning||l.restartCount>=l.maxRestarts},{default:(0,o.k6)((()=>[(0,o.eW)("Start")])),_:1},8,["onClick","disabled"]),(0,o.bF)(c,{onClick:r.stopCountdown,disabled:!l.isRunning},{default:(0,o.k6)((()=>[(0,o.eW)("Stop")])),_:1},8,["onClick","disabled"])])),_:1}),(0,o.bF)(d,{modelValue:l.maxRestarts,"onUpdate:modelValue":t[0]||(t[0]=e=>l.maxRestarts=e),label:"Max Sends",type:"number",min:"1"},null,8,["modelValue"])])),_:1})}var qa={name:"CountdownTimer",props:{seconds:{type:Number,required:!0},onCountdownFinish:{type:Function,default:null}},data(){return{timeRemaining:this.seconds,intervalId:null,restartTimeout:null,isRunning:!1,maxRestarts:0,restartCount:0}},methods:{startCountdown(){this.isRunning=!0,this.timeRemaining=this.seconds+Math.floor(30*Math.random())+1,this.intervalId=setInterval((()=>{this.timeRemaining>0?this.timeRemaining-=1:this.handleCountdownFinish()}),1e3)},stopCountdown(){clearInterval(this.intervalId),clearTimeout(this.restartTimeout),this.isRunning=!1,this.restartCount=0},handleCountdownFinish(){clearInterval(this.intervalId),this.onCountdownFinish&&this.onCountdownFinish(),this.isRunning&&this.restartCount<this.maxRestarts?(this.restartCount+=1,this.restartTimeout=setTimeout((()=>{this.startCountdown()}),1e3)):this.isRunning=!1}},beforeUnmount(){clearInterval(this.intervalId),clearTimeout(this.restartTimeout)}};const Ha=(0,p.A)(qa,[["render",Xa],["__scopeId","data-v-c82f36f8"]]);var Ja=Ha,Ka=a(2543);const Ya=qe.J1`
  query GetLead($phoneNumber: String!) {
    leads(filters: { phoneNumber: { eq: $phoneNumber } }) {
      data {
        id
      }
    }
  }
`,Qa=qe.J1`
  # Write your query or mutation here
mutation(
  $id: ID!
  $no: Int
  $user: String
  $name: String
  $phoneNumber: String
  $status: String
  $interaction: String
  $lastCall: DateTime
  $nextCall: DateTime
  $doc: String
) {
  updateMakeCall(
    id: $id
    data: {
      user: $user
      name: $name
      phoneNumber: $phoneNumber
      status: $status
      interaction: $interaction
      lastCall: $lastCall
      nextCall: $nextCall
      no: $no
      doc:$doc
    }
  ) {
    # Define the fields you want to be returned here

    data{
      id
      attributes{
    name
    phoneNumber
    status
    interaction
    lastCall
    nextCall
    no
    doc
    }
    }
  }
}

`;var za={name:"ContactList",props:{projectKey:{type:String,required:!0},enDate:{type:String,required:!0}},components:{vSelect:window["vue-select"],CountdownTimer:Ja},setup(){const e=(0,u.KR)([]);let t=[];const a=(0,u.KR)(0),n=(0,u.KR)(!1),l=(0,u.KR)(null);(0,o.sV)((()=>{const e=localStorage.getItem("currentIndex");null!==e&&(a.value=parseInt(e,10)),l.value=localStorage.getItem("user")})),(0,o.wB)(a,(e=>{if(null===e){const e=localStorage.getItem("currentIndex");null!==e&&(a.value=parseInt(e,10))}else localStorage.setItem("currentIndex",e)})),(0,o.wB)(l,(e=>{localStorage.setItem("user",e)}));const r=e=>{let[t,a,n]=e.replaceAll("/","-").split("-");return t<1e3?(a=a.padStart(2,"0"),t=t.padStart(2,"0"),`${n}-${a}-${t}T00:00:00Z`):`${t}-${a}-${n}T00:00:00Z`},{mutate:i}=(0,Xe.n_)(Qa),s=async t=>{try{await new Promise((e=>setTimeout(e)));let{name:e,doc:a,phoneNumber:n,status:o,interaction:s,lastCall:c,nextCall:u,no:d}=t;c=r(c),u=r(u);let m=l,p=0;"alyssa"===m.value.toLowerCase()&&(p=3),"alvin"===m.value.toLowerCase()&&(p=4),"ashton"===m.value.toLowerCase()&&(p=2);const h={id:p,doc:a,user:m.value,name:e,phoneNumber:n,status:o,interaction:s,lastCall:c,nextCall:u,no:d};await i(h),t.called=function(e){const t=parseInt(e,10);return isNaN(t)?1:t+1}(t.called),t.dialedDate=this.todayDDMMYYYY()}catch(n){console.error("Error updating callme:",n)}a.value=e.value.findIndex((e=>e.no===t.no))},c=()=>{console.log("Attempting to restore data from local storage...");const t=localStorage.getItem("appData");if(t)try{console.log("Saved data found in local storage:",t);const a=JSON.parse(t);e.value=a.contacts||[],n.value=!0,console.log("Data restored from local storage:",a)}catch(a){console.error("Error parsing data from local storage:",a)}else console.log("No saved data found in local storage.")};(0,o.sV)((()=>{c()})),(0,o.nT)((()=>{console.log("watchEffect triggered, contacts:",e.value)})),t=Aa()(e.value);const d=()=>{if(console.log("Attempting to save data to local storage..."),n.value)try{const t={contacts:e.value||[],user:l.value||null};localStorage.setItem("appData",JSON.stringify(t)),console.log("Data saved to local storage:",t)}catch(t){console.error("Error saving to local storage:",t)}else console.log("Data not saved: dataRestored.value is false")},m=(0,Ka.debounce)(d,1e3);return(0,o.wB)(e,(e=>{if(Array.isArray(e)){console.log("Contacts changed");let a=!1;if(console.log("New contacts length:",e.length),console.log("Initial contacts length:",t.length),Array.isArray(t)&&e.length!==t.length)a=!0;else for(let n=0;n<e.length;n++){const o=e[n],l=n<t.length?t[n]:void 0;if(!o||!l){a=!0;break}for(const e in o)if(o[e]!==l[e]){console.log(`Field '${e}' in contact ${o.id} changed`),o.updatedAt=(new Date).toISOString(),a=!0;break}if(a)break}a&&(n.value=!0,m(),t=Aa()(e))}else console.warn("Contacts is not an array or is undefined:",e)}),{deep:!0}),{restoreDataFromLocalStorage:c,makeCall:s,contacts:e,selectedUser:l,formattedDate:(new Date).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})}},mounted(){this.loadMessageFiles()},watch:{importDate(e){localStorage.setItem("importDate",e)}},created(){const e=localStorage.getItem("importDate");e&&(this.importDate=e)},data(){return{viewOnly:!0,dialog:!1,findValue2:"",showCountdown:!1,filterTerm:"",showform:!0,importDate:localStorage.getItem("importDate")||"",sortOrder:{phoneNumber:"asc",name:"asc",no:"asc",status:"asc",project:"asc",nextCall:"asc"},users:["Alyssa","Ashton","Alvin"],countries:[{country:"Spain"},{country:"France"},{country:"Ghana"},{country:"Nigeria"},{country:"Brazil"},{country:"Ecuador"}],headers2:[{text:"",title:"",value:"edit",width:"2%"},{text:"",title:"",value:"remove",width:"2%"},{text:"",title:"",value:"send",width:"2%"},{text:"",title:"",value:"call",width:"2%"},{text:"Project",title:"Project",value:"project",width:"3%"},{text:"Source",title:"Source",value:"source",width:"2%"},{text:"No",title:"No",value:"no",width:"3%"},{text:"Name",title:"Name",value:"name",width:"12%"},{text:"Language",title:"Lgn.",value:"language",width:"1%"},{text:"Phone ID",title:"Phone ID",value:"phoneId",width:"1%"},{text:"Phone",title:"Phone",value:"phoneNumber",width:"25%"},{text:"Interaction",title:"Interaction",value:"interaction",width:"26%"},{text:"Status",title:"Status",value:"status",width:"10%"},{text:"Doc",title:"Doc",value:"doc",width:"5%"},{text:"Called",title:"Called",value:"called",width:"4%"},{text:"Contacted",title:"Contacted",value:"contacted",width:"3%"},{text:"Dial Date",title:"Dialed Date",value:"dialedDate",width:"5%"},{text:"Last Called Date",title:"Last Call",value:"lastCall",width:"7%"},{text:"Next Call",title:"Next_Call",value:"nextCall",width:"7%"},{text:"Next Action",title:"Next Action",value:"na1",width:"5%"}],availableDates:this.generateDateOptions(),messageEn:[],messageCn:[],messageBs:[],phoneNumber:"",sendmsg:"",whatsappmessage:"",findValue:null,currentIndex:0,error:null,totalContacts:0,updatedCount:0,progressPercentage:0}},computed:{currentContact(){return this.contacts[this.currentIndex]||{}},filteredContacts(){return""===this.filterTerm?this.contacts:"dup"===this.filterTerm.toLowerCase()?this.getDuplicateRecords():"*"===this.filterTerm?this.contacts.filter((e=>e.interaction.includes("*"))):this.contacts.filter((e=>{const t=[e.name,e.phoneNumber,e.status];return t.some((e=>e.toString().toLowerCase().includes(this.filterTerm.toLowerCase())))}))}},methods:{todayDDMMYYYY(){const e=new Date,t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),n=e.getFullYear();return`${t}/${a}/${n}`},updateCallCount(){this.isPhoneDisabled(this.currentContact)||(this.currentContact.called=function(e){const t=parseInt(e,10);return isNaN(t)?1:t+1}(this.currentContact.called)),this.currentContact.dialedDate=this.todayDDMMYYYY()},clearForm(){const e=Math.max(...this.contacts.map((e=>e.no||0)))+1;this.contacts[this.currentIndex]={name:"",phoneNumber:"",interaction:"",project:this.currentContact.project,source:this.currentContact.source,updatedAt:(new Date).toISOString(),no:e,user:this.selectedUser}},addContact(){this.contacts.push({...this.currentContact}),this.clearForm()},deleteContact(){this.contacts.splice(this.currentIndex,1)},navigateToTalk(e){this.$router.push({path:"/talk",query:{contact:JSON.stringify(e)}})},CallSuccess(e){const t=new Date,a=`${t.getDate()}/${t.getMonth()+1}/${t.getFullYear()}`;e.lastCall=this.convertDMY2YMD(a),e.contacted+=1,e.status="ct,"+e.status},isPhoneDisabled(e){const t=String(e.status||""),a=String(e.interaction||"");return t.toLowerCase().includes("ni")||a.includes("xxx")},isValidEmail(e){const t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return t.test(e)},previousContact(){this.currentIndex>0&&this.currentIndex--},nextContact(){this.currentIndex<this.contacts.length-1&&this.currentIndex++},isBlank(e){return null===e||void 0===e||""===e.trim()},formattedPhoneNumber(e){if(this.isBlank(e))return"";const t=e.substring(0,3),a=e.substring(3);return`(${t}) ${a}`},async showConfirmDialog(e,t){return console.log("Showing confirm dialog..."),new Promise((a=>{this.dialog=!0,this.existingContact=e,this.contact=t,this.confirmDelete=n=>{console.log(`User chose: ${n}`),"local"==n?this.deleteLocalCopy(t):(this.deleteServerCopy(e),console.log("delete server copied")),this.dialog=!1,a(n)},this.cancelDelete=()=>{console.log("User canceled the dialog."),this.dialog=!1,a(!1)}}))},async loadContactsFromStrapi(e){const t=confirm('Do you want to overwrite existing contacts or append the new ones? Click "OK" to overwrite or "Cancel" to append.');t&&(this.contacts=[]);const a=qe.J1`
    query($project: String!) {
      leads(filters: { project: { eq: $project } }, pagination: { limit: 1000 }) {
        data {
          id
          attributes {
            project
            user
            name
            phoneNumber
            status
            phoneId
            interaction
            lastCall
            nextCall
            called
            dialedDate,
            contacted
            language
            message
            doc
            na1
            source
            occupation
            updatedAt
          }
        }
      }
    }
  `;try{const{data:n}=await Ta.query({query:a,variables:{project:e},fetchPolicy:"no-cache"});this.importDate=(new Date).toISOString(),n.leads.data.forEach((e=>{const a=this.contacts.find((t=>t.phoneNumber===e.attributes.phoneNumber)),n={no:this.contacts.length+1,user:e.attributes.user||"",name:e.attributes.name||"",phoneNumber:e.attributes.phoneNumber||"",project:e.attributes.project||"",occupation:e.attributes.occupation||"",status:e.attributes.status||"",phoneId:e.attributes.phoneId||"",interaction:e.attributes.interaction||"",lastCall:this.convertYMD2DMY(e.attributes.lastCall)||"1-1-1900",nextCall:this.convertYMD2DMY(e.attributes.nextCall)||"1-1-1900",called:e.attributes.called||0,dialedDate:this.convertYMD2DMY(e.attributes.dialedDate)||"1-1-1900",contacted:e.attributes.contacted||0,language:e.attributes.language||"",message:e.attributes.message||"",doc:e.attributes.doc||"",na1:e.attributes.na1||"",source:e.attributes.source||"",edit:!1,editField:"",updatedAt:this.importDate};a&&!t?Object.assign(a,n):this.contacts.push(n)})),this.sortContactsAndNumber("project")}catch(n){console.error("Error loading contacts from Strapi:",n)}finally{this.findValue2=""}},convertYMD2DMY(e){if(!e)return null;const t=new Date(e);if(1900===t.getFullYear()&&0===t.getMonth()&&1===t.getDate())return null;const a=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),o=t.getFullYear();return`${a}/${n}/${o}`},convertDMY2YMD(e){if(!e)return null;const t=e.replace(/-/g,"/"),[a,n,o]=t.split("/").map(Number);if(isNaN(a)||isNaN(n)||isNaN(o))return console.error("Invalid date components"),null;const l=new Date(o,n-1,a);if(l.getFullYear()!==o||l.getMonth()!==n-1||l.getDate()!==a)return console.error("Invalid date"),null;const r=l.getFullYear(),i=String(l.getMonth()+1).padStart(2,"0"),s=String(l.getDate()).padStart(2,"0"),c="00",u="00",d="00";return"1900"===r?null:`${r}-${i}-${s}T${c}:${u}:${d}Z`},async deleteServerCopy(e){const t=qe.J1`
    mutation deleteLead($id: ID!) {
      deleteLead( id: $id  ) {
        data{
        id
        }
      }
    }
  `;try{const a=await Ta.mutate({mutation:t,variables:{id:e.id}});a.data.deleteLead.data?console.log(`Server copy of ${e.phoneNumber} deleted.`):console.error(`Failed to delete contact: ${e.phoneNumber}`)}catch(a){console.error("Error deleting server copy:",a)}},deleteLocalCopy(e){const t=this.contacts.indexOf(e);t>-1&&this.contacts.splice(t,1)},async checkContactConflict(e,t){return(e.source!==t.source||e.name!==t.name||e.project!==t.project||e.interaction!==t.interaction||e.user!==this.selectedUser||e.phoneId!==t.phoneId)&&await this.showConfirmDialog(e,t)},async exportToStrapi(){const e=qe.J1`
    mutation UpdateLead(
      $id: ID!
      $no: Int
      $user: String
      $name: String
      $phoneNumber: String
      $status: String
      $phoneId: String
      $interaction: String
      $lastCall: DateTime
      $nextCall: DateTime
      $called: Int
      $contacted: Int
      $language: String
      $message: String
      $doc: String
      $na1: String
      $source: String
      $project: String
      $email: String
      $dialedDate: DateTime
    ) {
      updateLead(
        id: $id
        data: {
          user: $user
          name: $name
          phoneNumber: $phoneNumber
          status: $status
          phoneId: $phoneId
          interaction: $interaction
          lastCall: $lastCall
          nextCall: $nextCall
          called: $called
          no: $no
          language: $language
          contacted: $contacted
          message: $message
          doc: $doc
          na1: $na1
          source: $source
          project: $project
          email: $email
          dialedDate: $dialedDate
        }
      ) {
        data {
          id
          attributes {
            name
            phoneNumber
            status
            interaction
            lastCall
            nextCall
            no
          }
        }
      }
    }
  `;this.totalContacts=this.contacts.length,this.updatedCount=0;try{for(const a of this.contacts){const n=qe.J1`
        query GetLead($phoneNumber: String!) {
          leads(filters: { phoneNumber: { eq: $phoneNumber } }) {
            data {
              id
              attributes {
                no
                source
                project
                user
                name
                phoneNumber
                status
                phoneId
                interaction
                lastCall
                nextCall
                called
                contacted
                language
                message
                doc
                na1
                updatedAt
                email
                dialedDate
              }
            }
          }
        }
      `;if((this.importDate<a.updatedAt||null==a.updatedAt)&&!this.isBlank(a.phoneNumber)){const{data:o}=await Ta.query({query:n,variables:{phoneNumber:a.phoneNumber},fetchPolicy:"no-cache"});if(this.updatedCount++,Array.isArray(o.leads.data)&&o.leads.data.length>0)for(const l of o.leads.data){const o=l.attributes;o.id=l.id;const r=await this.checkContactConflict(o,a);if("server"==r){const e=await this.recordExists(a.phoneNumber,n);if(e)continue;this.AddRecord(a)}if(0!=r){console.log(`Conflict detected for ${a.phoneNumber}. Skipping...`);continue}const i={};for(const e in a)a[e]!==o[e]&&"id"!==e&&(i[e]=a[e]);if(Object.keys(i).length>0)try{await Ta.mutate({mutation:e,variables:{id:o.id,...i,contacted:parseInt(a.contacted,10),called:parseInt(a.called,10),dialedDate:this.convertDMY2YMD(a.dialedDate),email:this.isValidEmail(a.email)?a.email:null,lastCall:this.convertDMY2YMD(a.lastCall),nextCall:this.convertDMY2YMD(a.nextCall),user:this.selectedUser}}),console.log(`Updated contact: ${a.phoneNumber}`)}catch(t){console.error(`Error updating contact ${a.phoneNumber}:`,t)}}else this.AddRecord(a);this.progressPercentage=this.updatedCount/this.totalContacts*100,console.log(`Progress: ${this.progressPercentage.toFixed(2)}%`)}}alert("Data synchronization completed!")}catch(a){console.error("Error syncing contacts with Strapi:",a),alert("Error syncing contacts with Strapi: "+a.message)}},async recordExists(e){try{const{result:t}=(0,Xe.IT)(Ya,{phoneNumber:e}),a=await t,n=a.value||{},o=n.leads||{},l=o.data||[];return console.log("Query result:",n),l.length>0}catch(t){return console.error("Error checking record existence:",t),!1}},async AddRecord(e){const t=qe.J1`
        mutation CreateLead(
          $no: Int
          $user: String
          $name: String
          $phoneNumber: String
          $status: String
          $phoneId: String
          $interaction: String
          $lastCall: DateTime
          $nextCall: DateTime
          $called: Int
          $contacted: Int
          $language: String
          $message: String
          $doc: String
          $na1: String
          $source: String
          $project: String
          $email: String
          $dialedDate: DateTime
        ) {
          createLead(
            data: {
              user: $user
              name: $name
              phoneNumber: $phoneNumber
              status: $status
              phoneId: $phoneId
              interaction: $interaction
              lastCall: $lastCall
              nextCall: $nextCall
              called: $called
              no: $no
              language: $language
              contacted: $contacted
              message: $message
              doc: $doc
              na1: $na1
              source: $source
              project: $project
              email: $email
              dialedDate: $dialedDate
            }
          ) {
            data {
              id
              attributes {
                name
                phoneNumber
                status
                phoneId
                interaction
                lastCall
                nextCall
                no
                project
                source
              }
            }
          }
        }
      `;try{const a=await Ta.mutate({mutation:t,variables:{...e,no:parseInt(e.no,10),contacted:parseInt(e.contacted,10),called:parseInt(e.called,10),dialedDate:this.convertDMY2YMD(e.dialedDate),email:this.isValidEmail(e.email)?e.email:null,lastCall:this.convertDMY2YMD(e.lastCall),nextCall:this.convertDMY2YMD(e.nextCall),user:this.selectedUser}});console.log(`Created new contact: ${e.phoneNumber}`),console.log("Response:",a.data.createLead.data)}catch(a){console.error(`Error creating contact ${e.phoneNumber}:`,a),a.graphQLErrors&&a.graphQLErrors.forEach((e=>{console.error("GraphQL Error:",e.message)})),a.networkError&&console.error("Network Error:",a.networkError.message)}},removeContact(e){const t=this.filteredContacts[e],a=confirm(`Are you sure you want to delete the contact: ${t.name} (${t.phoneNumber})?`);if(a){const e=this.contacts.findIndex((e=>e===t));console.log("Removing contact at original index:",e),console.log("Contact:",this.contacts[e]),-1!==e&&this.contacts.splice(e,1)}else console.log("Contact removal canceled.")},getDuplicateRecords(){const e=this.contacts.reduce(((e,t)=>{const a=t.phoneNumber.trim();return a&&(e[a]=(e[a]||0)+1),e}),{}),t=Object.keys(e).filter((t=>e[t]>1));return this.contacts.filter((e=>t.includes(e.phoneNumber.trim())))},stopCountdownFromParent(){this.$refs.countdown.stopCountdown()},async sendMessage(){this.currentIndex=0;while(this.currentIndex<this.contacts.length){if(!this.contacts[this.currentIndex].status.trim().toLowerCase().includes("send")&&!this.contacts[this.currentIndex].status.trim().toLowerCase().includes("xxx")&&this.contacts[this.currentIndex].phoneNumber.trim().length>0){const t=this.contacts[this.currentIndex];let a="e";void 0!==t.language&&""!==t.language.trim()&&(a=t.language);try{let e="!"+a+this.sendmsg,n=this.getmessage(e,t);t.status="send",void 0!==t.doc?t.doc=this.sendmsg+t.doc:t.doc=this.sendmsg;const o=await L.A.post("http://localhost:3000/send-message",{number:t.phoneNumber,message:n});if(!o.data.success)return alert("Failed to send message: "+o.data.error),t.status="error 1 send",void this.$refs.countdown.stopCountdown()}catch(e){return console.error("Error:",e),t.status="error 2 send",alert("An error occurred: "+e.message),void this.$refs.countdown.stopCountdown()}this.currentIndex++;break}this.currentIndex++}this.currentIndex>=this.contacts.length&&(this.$refs.countdown.stopCountdown(),alert("send whatapp message completed"))},isVisible(e){return"showAll"===this.filter||e.phoneNumber&&e.phoneNumber.includes(this.searchTerm)},countdownFinished(){console.log("Countdown finished!"),this.sendMessage()},sortContacts(e){"asc"===this.sortOrder[e]?(this.contacts.sort(((t,a)=>t[e]<a[e]?-1:t[e]>a[e]?1:0)),this.sortOrder[e]="desc"):(this.contacts.sort(((t,a)=>t[e]<a[e]?1:t[e]>a[e]?-1:0)),this.sortOrder[e]="asc")},formatNumberWithLeadingZeros(e){const t=String(e),a=t.padStart(6,"0");return a},sortContactsAndNumber(e){"asc"===this.sortOrder[e]?(this.contacts.sort(((t,a)=>t[e]+this.formatNumberWithLeadingZeros(t["no"])<a[e]+this.formatNumberWithLeadingZeros(a["no"])?-1:t[e]+this.formatNumberWithLeadingZeros(t["no"])>a[e]+this.formatNumberWithLeadingZeros(a["no"])?1:0)),this.sortOrder[e]="desc"):(this.contacts.sort(((t,a)=>t[e]+t["no"]<a[e]+t["no"]?1:t[e]+t["no"]>a[e]+t["no"]?-1:0)),this.sortOrder[e]="asc")},printTable(){Oa()(document.getElementById("tableToPrint"),{filename:"myFilename.pdf",jsPDF:{unit:"in",format:"A3",orientation:"landscape",html2canvas:{scale:2}}})},rowClick(e){this.currentIndex=this.currentIndex===e?null:e},generateDateOptions(){const e=[],t=new Date;for(let a=0;a<30;a++){const n=new Date(t);n.setDate(t.getDate()+a);const o=String(n.getDate()).padStart(2,"0"),l=String(n.getMonth()+1).padStart(2,"0"),r=n.getFullYear(),i=`${o}/${l}/${r}`;e.push(i)}return e},addPlus(e){return"60"===e.substring(0,2)&&(e="+"+e),e.replaceAll("@","")},formatString(e){return void 0===e?"":(e=e.replace(/\D/g,""),e.length<=12?e.padEnd(12,"_"):e.slice(0,12))},loadMessageFiles(){this.loadTextFile("/messageEn.txt","messageEn"),this.loadTextFile("/messageCn.txt","messageCn")},loadTextFile(e,t){fetch(e).then((e=>e.text())).then((a=>{console.log(`File loaded successfully: ${e}`),console.log(`Data: ${a}`);const n=a.split("\n"),o=[];let l={code:"",msg:""};"undefined"!==this.projectKey?(n.forEach((e=>{if(!e.startsWith("_"))if(e.startsWith("@")){""!==l.code&&o.push(l);const[t,a]=e.split("|");l={code:t.trim().substring(1),msg:a.trim()+"\n"}}else l.msg+=e.trim().replaceAll("$plink","https://alvintkb.github.io/?p=gyp"+this.enDate+"$phone"+this.projectKey)+"\n"})),""!==l.code&&o.push(l),this[t].splice(0,this[t].length,...o),0==this[t].length&&alert("Error! "+t+" no data")):alert("ProjectKey Not defined")})).catch((e=>{console.error("Error loading text file:",e)}))},sendmessage(){if(this.phoneNumber&&this.whatsappmessage){let e=this.getmessage(this.whatsappmessage);const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t);const a=this.cleanPhoneNumber(this.phoneNumber),n=`https://api.whatsapp.com/send?phone=${a}&text=${encodeURIComponent(e)}`;window.open(n,"_blank")}else alert("Please enter both telephone number and WhatsApp message.")},jumpToIndex(){this.findValue>=0&&this.findValue<this.contacts.length?this.currentIndex=this.findValue-1:console.error("Invalid index.")},findContactByNumber(e){return this.contacts.find((t=>t.phoneNumber.includes(e)))},findNumber(){const e=this.findContactByNumber(this.findValue);if(e){let t=this.contacts.indexOf(e);this.currentIndex=t}else console.error("No contact found with phone number containing",this.findValue)},findName(){const e=this.findByName(this.findValue);if(e){let t=this.contacts.indexOf(e);this.currentIndex=t}else console.error("No contact found with this name containing",this.findValue)},findByName(e){return this.contacts.find((t=>t.name.toLowerCase().includes(e.toLowerCase())))},camelize(e){return e.replace(/(?:^\w|[-\s]\w)/g,(function(e){return e.toUpperCase()})).replace(/[-_]/g,"")},rowSendWhatsApp(e){this.validateInput(this.sendmsg)||(this.sendmsg="a0");const{phoneNumber:t,language:a}=e;var n="!"+(a||"e")+this.sendmsg;let o=this.getmessage(n,e);const l=document.createElement("textarea");l.value=o,document.body.appendChild(l),l.select(),document.execCommand("copy"),document.body.removeChild(l);const r=this.cleanPhoneNumber(t),i=`https://api.whatsapp.com/send?phone=${r}&text=${encodeURIComponent(o)}`;window.open(i,"_blank"),this.contacts[this.currentIndex].doc.length>0?this.contacts[this.currentIndex].doc+=","+this.sendmsg:this.contacts[this.currentIndex].doc+=this.sendmsg,this.currentIndex=this.contacts.findIndex((t=>t.no===e.no))},sendwhatsappmessage(){const{phoneNumber:e,na1:t,name:a,message:n}=this.currentContact;if("w"===t){if(this.validateInput(t)){let t=this.getmessage(n);t=t.replaceAll("@name",a),t=t.replaceAll("$phone",this.formatString(this.contacts[this.currentIndex].phoneNumber));const o=document.createElement("textarea");o.value=t,document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o);const l=this.cleanPhoneNumber(e),r=`https://api.whatsapp.com/send?phone=${l}&text=${encodeURIComponent(t)}`;window.open(r,"_blank"),this.moveToNextContact()}}else this.moveToNextContact()},getmessage(e,t){let a="";return"!c"===e.slice(0,2)?a=this.messageCn.find((t=>t.code===e.slice(1))).msg:"!e"===e.slice(0,2)||"!b"===e.slice(0,2)?0==this.messageEn.length?(alert("No Data"),a=""):a=this.messageEn.find((t=>t.code===e.slice(1))).msg:alert("message error on 1st character, only allow e c b:"+e),a=a.replaceAll("@name",t.name),a=a.replaceAll("@project",this.camelize(t.project)),a=a.replaceAll("$phone",this.formatString(t.phoneNumber)),a},validateInput(e){return!!e&&(this.error=null,!0)},moveToNextContact(){let e=0;do{if(this.currentIndex++,this.currentIndex>=this.contacts.length&&(this.currentIndex=0,e++,e>=this.contacts.length))break}while("w"!==this.contacts[this.currentIndex].na1)},startProcessing(){this.currentIndex=0;let e=0;while("w"!==this.contacts[this.currentIndex].na1)if(this.moveToNextContact(),e++,e>=this.contacts.length)break},loadJSONFile(e){const t=e.target.files[0];if(!t)return void(this.error="Please select a file.");localStorage.removeItem("appData"),this.contacts=[];const a=new FileReader;a.onload=e=>{try{const t=JSON.parse(e.target.result);this.contacts=t.map(((e,t)=>({no:t+1,name:e.name?e.name.trim():"",language:e.language?e.language.trim():"",phoneNumber:e.phoneNumber?this.addPlus(e.phoneNumber.trim()):"",email:e.email?String(e.email).trim():"",status:e.status?e.status.trim():"",phoneId:e.phoneId?e.phoneId.trim():"",dialedDate:e.dialedDate?e.dialedDate.trim():"1-1-1900",project:e.project?e.project.trim():"",source:e.source?e.source.trim():"",doc:e.doc?e.doc.trim():"",called:e.called?String(e.called).trim():"0",contacted:e.contacted?String(e.contacted).trim():"0",occupation:e.occupation?e.occupation.trim():"",na1:e.na1?e.na1.trim():"",message:e.message?e.message.trim():"",interaction:e.interaction?e.interaction.trim():"",nextCall:e.nextCall?e.nextCall.trim():"1-1-1900",lastCall:e.lastCall?e.lastCall.trim():"1-1-1900",edit:!1,editField:""}))),this.contacts.sort(((e,t)=>e.phoneNumber<t.phoneNumber?-1:e.phoneNumber>t.phoneNumber?1:0)),this.resetJsonFileInput()}catch(t){console.error("Error parsing JSON file:",t),this.error="Error parsing JSON file.",this.resetJsonFileInput()}},a.onerror=e=>{console.error("Error reading file:",e),this.error="Error reading file."},a.readAsText(t)},formatPhoneNumber(e){return e.startsWith("@")?e:"@"+e},removeDuplicatePhoneNumbers(){const e=new Set;this.contacts=this.contacts.filter((t=>!(!t.phoneNumber||e.has(t.phoneNumber))&&(e.add(t.phoneNumber),!0)))},loadCSVFile(e){const t=e.target.files[0];if(!t)return void(this.error="Please select a file.");const a=new FileReader;a.onload=e=>{const t=e.target.result;Ba().parse(t,{header:!0,complete:e=>{const t=e.data.map(((e,t)=>({no:t+1,name:e.name?e.name.trim():"",phoneNumber:e.phoneNumber?this.addPlus(e.phoneNumber.trim()):"",email:e.email?e.email.trim():"",status:e.status?e.status.trim():"",phoneId:e.phoneId?e.phoneId.trim():"",date:e.date?e.date.trim():"1-1-1900",project:e.project?e.project.trim():"",source:e.source?e.source.trim():"",occupation:e.occupation?e.occupation.trim():"",na1:e.na1?e.na1.trim():"",message:e.message?e.message.trim():"",interaction:e.interaction?e.interaction.trim():"",nextCall:e.nextCall?e.nextCall.trim():"1-1-1900",lastCall:e.lastCall?e.lastCall.trim():"1-1-1900",edit:!1,editField:""})));this.promptUser(t),this.resetFileInput()},error:e=>{console.error("Error parsing CSV file:",e),this.error="Error parsing CSV file.",this.resetFileInput()}}),this.sortContactsAndNumber("project")},a.readAsText(t)},exportToCSV(){const e="source,project,name,phoneNumber,message,interaction,status,phoneId,date,occupation,na1,email",t=this.contacts.map((e=>{const t=e.date?e.date.trim():"",a=t||(new Date).toLocaleDateString("en-CA");return`${e.source},${e.project},${e.name},${this.formattedPhoneNumber(e.phoneNumber)},${e.message},${e.interaction},${e.status},${e.phoneId},${a},${e.occupation},${e.na1},${e.message},${e.email}`})).join("\n"),a=`${e}\n${t}`,n=new Blob([a],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a"),l=URL.createObjectURL(n);o.setAttribute("href",l),o.setAttribute("download","contacts.csv"),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)},resetFileInput(){this.$refs.fileInput.value=""},resetJsonFileInput(){this.$refs.jsonFileInput.value=""},promptUser(e){confirm('Do you want to overwrite the existing contacts? Click "OK" to overwrite, "Cancel" to append.')?this.contacts=e:this.contacts=[...this.contacts,...e]},exportToJSON(){const e=JSON.stringify(this.contacts,null,2),t=new Blob([e],{type:"application/json;charset=utf-8;"}),a=document.createElement("a"),n=URL.createObjectURL(t);a.setAttribute("href",n),a.setAttribute("download","contacts.json"),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)},editField(e,t){e.edit=!0,e.editField=t},saveField(e){e.edit=!1,e.editField=""}}};const Ga=(0,p.A)(za,[["render",Na],["__scopeId","data-v-2f3ac57d"]]);var Za=Ga;const en=e=>((0,o.Qi)("data-v-400da67c"),e=e(),(0,o.jt)(),e),tn=en((()=>(0,o.Lk)("h2",null,"Make Calls",-1))),an=en((()=>(0,o.Lk)("strong",null,"User:",-1))),nn=en((()=>(0,o.Lk)("strong",null,"Name:",-1))),on=en((()=>(0,o.Lk)("strong",null,"Status:",-1))),ln=en((()=>(0,o.Lk)("strong",null,"Interaction:",-1))),rn=en((()=>(0,o.Lk)("strong",null,"Last Call:",-1))),sn=en((()=>(0,o.Lk)("strong",null,"Next Call:",-1))),cn=en((()=>(0,o.Lk)("strong",null,"Phone Number:",-1))),un=en((()=>(0,o.Lk)("strong",null,"Doc:",-1))),dn=en((()=>(0,o.Lk)("strong",null,"No:",-1))),mn=en((()=>(0,o.Lk)("h2",null,"Contacts",-1))),pn=en((()=>(0,o.Lk)("strong",null,"ID:",-1))),hn=en((()=>(0,o.Lk)("strong",null,"Name:",-1))),gn=en((()=>(0,o.Lk)("strong",null,"Email:",-1)));function fn(e,t,a,n,l,r){return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",null,[tn,(0,o.Lk)("ul",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.makeCalls,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e.id},[(0,o.Lk)("p",null,[an,(0,o.eW)(" "+(0,v.v_)(e.user),1)]),(0,o.Lk)("h1",null,[nn,(0,o.eW)(" "+(0,v.v_)(e.name),1)]),(0,o.Lk)("p",null,[on,(0,o.eW)(" "+(0,v.v_)(e.status),1)]),(0,o.Lk)("h3",null,[ln,(0,o.eW)(" "+(0,v.v_)(e.interaction),1)]),(0,o.Lk)("p",null,[rn,(0,o.eW)(" "+(0,v.v_)(e.lastCall),1)]),(0,o.Lk)("p",null,[sn,(0,o.eW)(" "+(0,v.v_)(e.nextCall),1)]),(0,o.Lk)("p",null,[cn,(0,o.eW)(" "+(0,v.v_)(e.phoneNumber),1)]),(0,o.Lk)("p",null,[un,(0,o.eW)(" "+(0,v.v_)(e.doc),1)]),(0,o.Lk)("p",null,[dn,(0,o.eW)(" "+(0,v.v_)(e.no),1)])])))),128))])]),(0,o.Lk)("div",null,[mn,(0,o.Lk)("ul",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.contacts,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e.id},[(0,o.Lk)("p",null,[pn,(0,o.eW)(" "+(0,v.v_)(e.id),1)]),(0,o.Lk)("p",null,[hn,(0,o.eW)(" "+(0,v.v_)(e.name),1)]),(0,o.Lk)("p",null,[gn,(0,o.eW)(" "+(0,v.v_)(e.email),1)])])))),128))])])])}var vn=a(6373),bn={name:"SocketComponent",setup(){const e={NODE_ENV:"production",VUE_APP_CLOUDINARY_URL:"cloudinary://534437115195651:zG55yScmwQDNzt_hlbJJCdt2vUI@alvin-tan",BASE_URL:"/list/"}.VUE_APP_SERVER_URL||"https://sp412b-763ef468411d.herokuapp.com/",t=(0,vn.io)(e),a=(0,u.KR)([]),n=(0,u.KR)([]),l=()=>{console.log("Socket connected!"),t.on("makeCall:create",(e=>{console.log("makeCall created!",e),a.value.push(e)})),t.on("makeCall:update",(e=>{console.log("makeCall updated!",e);const t=a.value.findIndex((t=>t.id===e.id));-1!==t?a.value[t]={...a.value[t],...e}:a.value.push(e)})),t.on("makeCall:delete",(e=>{console.log("makeCall deleted!",e),a.value=a.value.filter((t=>t.id!==e.id))})),t.on("contact:create",(e=>{console.log("contact created!",e),n.value.push(e)})),t.on("contact:update",(e=>{console.log("contact updated!",e);const t=n.value.findIndex((t=>t.id===e.id));-1!==t?n.value[t]={...n.value[t],...e}:n.value.push(e)})),t.on("contact:delete",(e=>{console.log("contact deleted!",e),n.value=n.value.filter((t=>t.id!==e.id))}))},r=()=>{console.log("Socket disconnected!")};return(0,o.sV)((()=>{console.log("start!"),t.on("connect",l),t.on("disconnect",r)})),(0,o.hi)((()=>{t.off("connect",l),t.off("disconnect",r),t.disconnect()})),{makeCalls:a,contacts:n}}};const kn=(0,p.A)(bn,[["render",fn],["__scopeId","data-v-400da67c"]]);var yn=kn;function Cn(e,t,a,n,l,r){const i=(0,o.g2)("v-text-field"),s=(0,o.g2)("v-col"),c=(0,o.g2)("v-btn"),u=(0,o.g2)("v-row"),d=(0,o.g2)("v-alert"),m=(0,o.g2)("v-data-table"),p=(0,o.g2)("v-container");return(0,o.uX)(),(0,o.Wv)(p,null,{default:(0,o.k6)((()=>[(0,o.bF)(u,null,{default:(0,o.k6)((()=>[(0,o.bF)(s,{cols:"12",md:"6"},{default:(0,o.k6)((()=>[(0,o.bF)(i,{modelValue:n.searchProject,"onUpdate:modelValue":t[0]||(t[0]=e=>n.searchProject=e),label:"Enter project name",outlined:""},null,8,["modelValue"])])),_:1}),(0,o.bF)(s,{cols:"12",md:"6"},{default:(0,o.k6)((()=>[(0,o.bF)(c,{onClick:n.fetchLeads,color:"primary"},{default:(0,o.k6)((()=>[(0,o.eW)("Search")])),_:1},8,["onClick"])])),_:1})])),_:1}),n.loading?((0,o.uX)(),(0,o.Wv)(d,{key:0,type:"info",dismissible:""},{default:(0,o.k6)((()=>[(0,o.eW)(" Loading... ")])),_:1})):(0,o.Q3)("",!0),n.error?((0,o.uX)(),(0,o.Wv)(d,{key:1,type:"error",dismissible:""},{default:(0,o.k6)((()=>[(0,o.eW)(" An error occurred: "+(0,v.v_)(n.error.message),1)])),_:1})):(0,o.Q3)("",!0),n.loading||n.error||!n.leads.length?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.Wv)(m,{key:2,headers:n.headers,items:n.leads,"item-key":"id",class:"elevation-1"},{["item.name"]:(0,o.k6)((({item:e})=>[(0,o.eW)((0,v.v_)(e.attributes.name),1)])),["item.phoneNumber"]:(0,o.k6)((({item:e})=>[(0,o.eW)((0,v.v_)(e.attributes.phoneNumber),1)])),_:2},1032,["headers","items"]))])),_:1})}var wn={name:"searchList",setup(){const e=(0,u.KR)(""),t=(0,u.KR)([]),a=(0,u.KR)(!1),n=(0,u.KR)(null),o=[{text:"Name",value:"name"},{text:"Phone Number",value:"phoneNumber"}],l=qe.Ay`
      query($project: String!) {
        leads(filters: { project: { eq: $project } }, pagination: { limit: 1000 }) {
          data {
            id
            attributes {
              name
              phoneNumber
              project
              user
              status
              phoneId
              interaction
              lastCall
              nextCall
              called
              contacted
              language
              message
              doc
              na1
              source
              occupation
              updatedAt
            }
          }
        }
      }
    `,r=async()=>{a.value=!0,n.value=null;try{const{result:a,error:o}=(0,Xe.IT)(l,{project:e.value});o.value?(n.value=o.value,console.error("Error fetching leads:",n.value)):a.value&&(t.value=a.value.leads.data)}catch(o){n.value=o,console.error("Unexpected error:",o)}finally{a.value=!1}};return{searchProject:e,leads:t,fetchLeads:r,loading:a,error:n,headers:o}}};const Fn=(0,p.A)(wn,[["render",Cn],["__scopeId","data-v-18dbee9c"]]);var In=Fn;const xn=["innerHTML"];function Ln(e,t,a,n,l,r){const i=(0,o.g2)("v-select"),s=(0,o.g2)("v-col"),c=(0,o.g2)("v-row"),u=(0,o.g2)("v-container");return(0,o.uX)(),(0,o.Wv)(u,{class:"full-height"},{default:(0,o.k6)((()=>[(0,o.bF)(c,null,{default:(0,o.k6)((()=>[(0,o.bF)(s,{cols:"12"},{default:(0,o.k6)((()=>[(0,o.bF)(i,{modelValue:l.selectedTitle,"onUpdate:modelValue":t[0]||(t[0]=e=>l.selectedTitle=e),items:l.titles,label:"Select Message Type",outlined:""},null,8,["modelValue","items"])])),_:1})])),_:1}),(0,o.bF)(c,{class:"full-height"},{default:(0,o.k6)((()=>[(0,o.bF)(s,null,{default:(0,o.k6)((()=>[(0,o.Lk)("p",{innerHTML:r.selectedMessage},null,8,xn)])),_:1})])),_:1})])),_:1})}var Sn={name:"saleTalk",data(){return{currentContact:null,selectedTitle:"Project Ashwood",titles:["Project Ashwood","Project Titan","For Sales & Rent","Exclusive Opportunity at RBJ Condominium"],messages:{"Project Ashwood":"page 1\n<b>Ashwood: Your Gateway to Urban Living</b><br/>\nPreviously, you inquired about <b>@project</b>, our newly launched condominium at Jalan Uthant. Strategically located just 5 minutes from KLCC and 10 minutes from TRX, Ashwood offers the perfect blend of convenience and tranquility.<br/><br/>\nNestled amidst prestigious educational institutions like Flose International School and SJKK Chung Hwa(p) School, @project provides a prime location for families and individuals seeking a high-quality lifestyle.<br/><br/>\n<b>Exclusive Event This Saturday</b><br/>\nJoin us this Saturday for a private event where you can explore our remaining 30 units. All units are corner units, ensuring breathtaking views of KLCC or Bukit Ampang.<br/>\nWhether you're looking for a dream home or a lucrative investment, @project presents an exceptional opportunity.<br/><br/>\n            <b>Reseller Program</b><br/>\nWe invite you to participate in our reseller program and earn referral fees for every successful sale.<br/><br/>","Project Titan":"page 2, Previously, you inquired about <b>@project</b>, our newly launched condominium at Bukit Jalil. Are you considering it for investment or home stay?\n           for stay I recommend @project,\n           Strategically located just 5 minutes to Pavillion  and 5 minutes from LRT, @project offers the perfect blend of convenience and tranquility.<br/><br/>\nNestled amidst prestigious educational institutions like Chi Ji International School, @project provides a prime location for families and individuals seeking a high-quality lifestyle.<br/><br/>\n<b>Exclusive Event This Saturday</b><br/>\nJoin us this Saturday for a private event where you can explore our remaining 30 units. All units are corner units, ensuring breathtaking views of KLCC or Bukit Ampang.<br/>\nWhether you're looking for a dream home or a lucrative investment, @project presents an exceptional opportunity.<br/><br/>\n<b>Reseller Program</b><br/>\nWe invite you to participate in our reseller program and earn referral fees for every successful sale.<br/><br/>","For Sales & Rent":"page 3\n<b>@project: Your Gateway to Urban Living</b><br/>\nHi @name, I understand that you have a unit at @project. we have a potential customer who are interested in the unit, are you considering selling or Rent? We offer complimentary advertising services to help you generate income from your property. Our team is ready to assist you.<br/>\nWe offer a hassle-free process to help you with the sale. Let us know how we can assist.<br/>\nTo proceed, may I know if the unit is furnished or unfurnished? Could you also let us know the floor it's located on and the square footage of the unit? These details would be helpful for the potential tenant or buyer.\nThank you, and we're looking forward to assisting you further!\",\n            ","Exclusive Opportunity at RBJ Condominium":"\n\nThank you for your previous inquiry about RBJ, our newly launched condominium in Bukit Jalil. Are you considering it as an investment or for your home?\n\nIf you're looking for a place to live, RBJ is the perfect choice. Located just 5 minutes from Pavilion and the LRT, it offers an unbeatable combination of convenience and tranquility. Imagine living in a home where everything you need is just a few minutes away—shops, restaurants, schools, and easy transportation access.\n\nPlus, with its serene surroundings and modern amenities, RBJ offers a high-quality lifestyle for both families and individuals. Whether you're thinking about upgrading your lifestyle or securing a valuable asset for the future, RBJ is a smart move.\n"},formattedText:""}},created(){const e=this.$route.query.contact;let t=null;if(e)try{t=JSON.parse(e)}catch(o){console.error("Failed to parse contact string:",o)}let a="",n="";t&&(a=t.name,n=t.project,n&&a&&(this.formattedText=this.buildPersonalizedText(n,a,this.selectedTitle)))},watch:{selectedTitle(e){const t=this.$route.query.contact;let a=null;if(t)try{a=JSON.parse(t)}catch(n){console.error("Failed to parse contact string:",n)}a&&(this.formattedText=this.buildPersonalizedText(a.project,a.name,e))}},computed:{selectedMessage(){return this.formattedText}},methods:{buildPersonalizedText(e,t,a){let n=this.messages[a];return n=n.replaceAll("@name",t),n=n.replaceAll("@project",e),n}}};const _n=(0,p.A)(Sn,[["render",Ln],["__scopeId","data-v-065177a0"]]);var Rn=_n;function $n(e,t,a,n,l,r){const i=(0,o.g2)("v-alert"),s=(0,o.g2)("v-data-table"),c=(0,o.g2)("v-container");return(0,o.uX)(),(0,o.Wv)(c,null,{default:(0,o.k6)((()=>[n.loading?((0,o.uX)(),(0,o.Wv)(i,{key:0,type:"info",dismissible:""},{default:(0,o.k6)((()=>[(0,o.eW)(" Loading... ")])),_:1})):(0,o.Q3)("",!0),n.error?((0,o.uX)(),(0,o.Wv)(i,{key:1,type:"error",dismissible:""},{default:(0,o.k6)((()=>[(0,o.eW)(" An error occurred: "+(0,v.v_)(n.error.message),1)])),_:1})):(0,o.Q3)("",!0),n.loading||n.error||!n.uniqueProjects.length?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.Wv)(s,{key:2,headers:n.headers,items:n.uniqueProjects,"item-key":"project",class:"elevation-1"},{["item.source"]:(0,o.k6)((({item:e})=>[(0,o.eW)((0,v.v_)(e.source),1)])),["item.project"]:(0,o.k6)((({item:e})=>[(0,o.eW)((0,v.v_)(e.project),1)])),_:2},1032,["headers","items"]))])),_:1})}var Nn={name:"listProject",setup(){const e=(0,u.KR)([]),t=(0,u.KR)(!1),a=(0,u.KR)(null),n=[{text:"Source",value:"source"},{text:"Project",value:"project"}],o=qe.Ay`
      query {
        leads(pagination: { limit: 1000 }) {
          data {
            attributes {
              project
              source
            }
          }
        }
      }
    `,l=async()=>{t.value=!0,a.value=null;try{const{result:t,error:n}=(0,Xe.IT)(o);if(n.value)a.value=n.value,console.error("Error fetching projects:",a.value);else if(t.value){const a=t.value.leads.data;e.value=r(a)}}catch(n){a.value=n,console.error("Unexpected error:",n)}finally{t.value=!1}},r=e=>{const t=new Map;return e.forEach((e=>{const a=e.attributes.project,n=e.attributes.source;t.has(a)||t.set(a,{project:a,source:n})})),Array.from(t.values())};return l(),{uniqueProjects:e,loading:t,error:a,headers:n}}};const En=(0,p.A)(Nn,[["render",$n],["__scopeId","data-v-7a1852e1"]]);var Dn=En;const Un=[{path:"/main",name:"MainPage",component:Ht,meta:{requiresAuth:!1}},{path:"/home",name:"HomePage",component:ft,meta:{requiresAuth:!1}},{path:"/soc",name:"SocketComponent",component:yn,meta:{requiresAuth:!1}},{path:"/",name:"ContactList",component:Za,meta:{requiresAuth:!1}},{path:"/snr",name:"searchList",component:In,meta:{requiresAuth:!1}},{path:"/talk",name:"saleTalk",component:Rn,meta:{requiresAuth:!1}},{path:"/listProject",name:"listProject",component:Dn,meta:{requiresAuth:!1}},{path:"/business",name:"BusinessPage",component:Pt,meta:{requiresAuth:!1}},{path:"/winback",name:"WinbackPage",component:Vt,meta:{requiresAuth:!1}},{path:"/about",name:"AboutPage",component:Ft,meta:{requiresAuth:!1}}],Mn=(0,f.aE)({history:(0,f.Bt)(),routes:Un});Mn.beforeEach(((e,t,a)=>{const n="true"===localStorage.getItem("authenticated");e.matched.some((e=>e.meta.requiresAuth))&&!n?a("/"):a()}));var Pn=Mn,Tn=a(4825),Wn=a(2938),An=a(3379),jn=(a(5524),a(1193));const On=(0,jn.$)({uri:"https://sp412b-763ef468411d.herokuapp.com/graphql"}),Vn=new Da.R({link:On,cache:new Ua.D});(0,Xe._5)(Vn);const Bn=(0,n.Ef)(g),Xn=(0,Tn.$N)({components:Wn,directives:An});Bn.config.globalProperties.cleanPhoneNumber=function(e){return e.replace(/[\s-]/g,"")},Bn.use(Pn),Bn.use(Xn),Bn.mount("#app")}},t={};function a(n){var o=t[n];if(void 0!==o)return o.exports;var l=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(l.exports,l,l.exports,a),l.loaded=!0,l.exports}a.m=e,function(){var e=[];a.O=function(t,n,o,l){if(!n){var r=1/0;for(u=0;u<e.length;u++){n=e[u][0],o=e[u][1],l=e[u][2];for(var i=!0,s=0;s<n.length;s++)(!1&l||r>=l)&&Object.keys(a.O).every((function(e){return a.O[e](n[s])}))?n.splice(s--,1):(i=!1,l<r&&(r=l));if(i){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[n,o,l]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};a.t=function(n,o){if(1&o&&(n=this(n)),8&o)return n;if("object"===typeof n&&n){if(4&o&&n.__esModule)return n;if(16&o&&"function"===typeof n.then)return n}var l=Object.create(null);a.r(l);var r={};e=e||[null,t({}),t([]),t(t)];for(var i=2&o&&n;"object"==typeof i&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach((function(e){r[e]=function(){return n[e]}}));return r["default"]=function(){return n},a.d(l,r),l}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,n){return a.f[n](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/"+e+"."+{668:"303c240e",838:"93dcc815"}[e]+".js"}}(),function(){a.miniCssF=function(e){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="vue5:";a.l=function(n,o,l,r){if(e[n])e[n].push(o);else{var i,s;if(void 0!==l)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==t+l){i=d;break}}i||(s=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,a.nc&&i.setAttribute("nonce",a.nc),i.setAttribute("data-webpack",t+l),i.src=n),e[n]=[o];var m=function(t,a){i.onerror=i.onload=null,clearTimeout(p);var o=e[n];if(delete e[n],i.parentNode&&i.parentNode.removeChild(i),o&&o.forEach((function(e){return e(a)})),t)return t(a)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=m.bind(null,i.onerror),i.onload=m.bind(null,i.onload),s&&document.head.appendChild(i)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){a.p="/list/"}(),function(){var e={524:0};a.f.j=function(t,n){var o=a.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else{var l=new Promise((function(a,n){o=e[t]=[a,n]}));n.push(o[2]=l);var r=a.p+a.u(t),i=new Error,s=function(n){if(a.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var l=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src;i.message="Loading chunk "+t+" failed.\n("+l+": "+r+")",i.name="ChunkLoadError",i.type=l,i.request=r,o[1](i)}};a.l(r,s,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,l,r=n[0],i=n[1],s=n[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(o in i)a.o(i,o)&&(a.m[o]=i[o]);if(s)var u=s(a)}for(t&&t(n);c<r.length;c++)l=r[c],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(u)},n=self["webpackChunkvue5"]=self["webpackChunkvue5"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[504],(function(){return a(3243)}));n=a.O(n)})();
//# sourceMappingURL=app.5396e109.js.map